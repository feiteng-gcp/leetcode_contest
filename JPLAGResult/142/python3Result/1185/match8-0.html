<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>212_jasonginus.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>212_jasonginus.py</CENTER></H3><HR>
<PRE>
# &quot;&quot;&quot;
# This is MountainArray's API interface.
# You should not implement it, or speculate about its implementation
# &quot;&quot;&quot;
#class MountainArray:
#    def get(self, index: int) -&gt; int:
#    def length(self) -&gt; int:

class Solution:
    
    def findInMountainArray(self, target: int, A: 'MountainArray') -&gt; int:
#         n = A.length()
#         start, end = 0, n - 1
#         mid = (start + end) // 2
#         A.get(mid)
        
        
        self.count = 0
        n = A.length()
        top_ix = self.findTop(A)
        print(self.count)
        ix = self.findInFirstPart(A, 0, top_ix, target)
        print(self.count)
        if ix != -1: return ix
        ix = self.findInSecondPard(A, top_ix, n - 1, target)
        print(self.count)
        return ix
    
    def get(self, A, ix):
        self.count += 1
        return A.get(ix)

    def findTop(self, A):
        start, end = 0, A.length() - 1
        while start + 1 &lt; end:
            mid = (start + end) // 2
            left, cur, right = self.get(A, mid - 1), self.get(A, mid), self.get(A, mid + 1)
            if left &lt; cur &lt; right:
                start = mid
            elif left &gt; cur &gt; right:
                end = mid
            else:
                return mid
        return start if self.get(A, start) &gt; self.get(A, end) else end
    
    def findInFirstPart(self, A, start, end, target):
        while start + 1 &lt; end:
            mid = (start + end) // 2
            val = self.get(A, mid)
            if val &lt; target:
                start = mid
<A NAME="0"></A>            elif val &gt; target:
                end = mid
            else:
                r<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match8-1.html#0',3,'match8-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>eturn mid
        if self.get(A, start) == target: return start
        if self.get(A, end) == target: return end
        return -1
    
    def findInSecondPard(self, A, start, end, target):
        while start + 1 &lt; end:
            mid = (start + end) // 2
            val = self.get(A, mid)
            if</B></FONT> val &gt; target:
                start = mid
<A NAME="1"></A>            elif val &lt; target:
                end = mid
            else:
                r<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match8-1.html#1',3,'match8-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>eturn mid
        if self.get(A, start) == target: return start
        if self.get(A, end) == target: return end
        re</B></FONT>turn -1
    
        
</PRE>

</BODY>
</HTML>
