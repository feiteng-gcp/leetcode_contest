<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>48_balakrishnan_v.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>48_balakrishnan_v.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    
    int max_len_ending[27][22222];
    bool has_backwards[27][22222];
    int max_len_starting[27][22222];
    bool has_forwards[27][22222];
  
    
    int maxRepOpt1(string text) {
        int L=text.size();
        
        for(int c=0;c&lt;26;c++) {
            max_len_ending[c][0]=0;
            has_backwards[c][0]=false;
        }
        for(int i=1;i&lt;=L;i++) {
            for(int c=0;c&lt;26;c++) {
                if (text[i-1]==c+'a') {
                    max_len_ending[c][i]=1+max_len_ending[c][i-1];
                    has_backwards[c][i]=true;
                }
                else {
                    max_len_ending[c][i]=0;
                    has_backwards[c][i]=has_backwards[c][i-1];
                }
            }
        }
        
        for(int c=0;c&lt;26;c++) {
            max_len_starting[c][L+1]=0;
            has_forwards[c][L+1]=false;
        }
        for(int i=L;i&gt;=1;i--) {
            for(int c=0;c&lt;26;c++) {
                if (text[i-1]==c+'a') {
                    max_len_starting[c][i]=1+max_len_starting[c][i+1];
                    has_forwards[c][i]=true;
                }
                else {
<A NAME="0"></A>                    max_len_starting[c][i]=0;
                    has_forwards[c][i]=has_forwards[c][i+1];
                }
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match35-1.html#0',3,'match35-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            }
        }
        
        
        
        int ans=0;
        for(int i=1;i&lt;=L;i++) {
            for(int c=0;c&lt;26;c++) {
                int l1 = max_len_ending[c][i-1];</B></FONT>
                int l2 = max_len_starting[c][i+1];
                
                if (has_backwards[c][i-l1-1] || has_forwards[c][i+l2+1] || text[i-1]==c+'a')
                    ans = max(ans, l1+l2+1);
                else
                    ans = max(ans, l1+l2);
            }
            
        }
        return ans;
        
    }
};
</PRE>
</BODY>
</HTML>
