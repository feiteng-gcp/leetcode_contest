<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>6_wyh9346.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>6_wyh9346.cpp</CENTER></H3><HR>
<PRE>
class Solution {
#define MAXN 10010
public:
    vector&lt;int&gt; stack, DFN, Low, Belong, instack, hole;
    int cnt, scnt, top;
    vector&lt;int&gt; res;
    void Tarjan(int v, vector&lt;vector&lt;int&gt;&gt;&amp; graph) {
        DFN[v] = Low[v] = ++cnt;
        instack[v] = 1;
        stack[top++] = v;
        for (int i = 0; i &lt; graph[v].size(); i++) {
            int j = graph[v][i];
            if (v == j) {
                hole[v] = true;
            }
            if (!DFN[j]) {
                Tarjan(j, graph);
                if (Low[v] &gt; Low[j]) {
                    Low[v] = Low[j];
                }
            } else if (instack[j] &amp;&amp; DFN[j] &lt; Low[v]) {
                hole[v] = hole[j] = true;
                Low[v] = DFN[j];
            }
            if (hole[j]) {
                hole[v] = true;
            }
        }
        if (DFN[v] == Low[v]) {
            scnt++;
            int tt = 0;
            int t = -1;
            bool has_hole = false;
            do {
                t = stack[--top];
                instack[t] = 0;
                Belong[t] = scnt;
                tt++;
                if (hole[t]) {
                    has_hole = true;
                }
            } while (t != v);
            if (has_hole) {
                hole[v] = true;
            }
            if (tt == 1 &amp;&amp; !has_hole) {
                res.push_back(v);
            }
        }
    }
    vector&lt;int&gt; eventualSafeNodes(vector&lt;vector&lt;int&gt;&gt;&amp; graph) {
        stack.resize(MAXN);
        Belong.resize(MAXN, INT_MIN);
        Low.resize(MAXN);
        instack.resize(MAXN);
        hole.resize(MAXN);
<A NAME="0"></A>        scnt = cnt = top = 0;
        DFN.resize(MAXN);
        int n = graph.size();
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match1-0.html#0',2,'match1-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        for (int i = 0; i &lt; n; i++) {
            if (!DFN[i]) {
                Tarjan(i, graph);
            }
        }
        // for (int i = 0; i &lt; n; i++) {
        //     cout &lt;&lt; i &lt;&lt; &quot;\t&quot; &lt;&lt; Belong[i] &lt;&lt; endl;
        // }
        sort(res.begin(), res.end());
        return res;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
