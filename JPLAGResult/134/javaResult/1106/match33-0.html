<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>70_albaniliu.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>70_albaniliu.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class Solution {
    private boolean solve(int[][] blocked, int[] source, int[] target) {
		Map&lt;Integer, Set&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();
		for (int i = 0<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match33-1.html#0',3,'match33-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>; i &lt; blocked.length; i++) {
			if (!map.containsKey(blocked[i][0])) {
				map.put(blocked[i][0], new HashSet&lt;&gt;());
			}
			map.get(blocked[i][0]).add(blocked[i][1]);
		}
		Map&lt;Integer, Set&lt;Integer&gt;&gt; visited = new HashMap&lt;&gt;();</B></FONT>
		int N = 1000000;
<A NAME="1"></A>		int M = 1000000;
		int cnt = 0;
		Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;();
		queue.add(new <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match33-1.html#1',3,'match33-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int[]{source[0], source[1]});
		if (!visited.containsKey(source[0])) {
			visited.put(source[0], new HashSet&lt;&gt;());
		}
		visited.get(source[0]).ad</B></FONT>d(source[1]);

		int [] dx = new int[] {0, 1, 0, -1};
		int [] dy = new int[] {1, 0, -1, 0};

		while (!queue.isEmpty() &amp;&amp; cnt &lt; 50000) {
			int[] cur = queue.poll();
			for (int k = 0; k &lt; 4; k++) {
				int x = cur[0] + dx[k];
				int y = cur[1] + dy[k];
				if (x &lt; 0 || x &gt;= N || y &lt; 0 || y &gt;= M) continue;
<A NAME="2"></A>				if (map.containsKey(x) &amp;&amp; map.get(x).contains(y)) continue;
				if (visited.containsKey(x) &amp;&amp; visited.get(x).contains(y)) continue;

				if (!visited.containsKey(x))<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match33-1.html#2',3,'match33-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B> {
					visited.put(x, new HashSet&lt;&gt;());
				}
				visited.get(x).add(y);</B></FONT>
				cnt ++;
				queue.add(new int[]{x, y});
				if (x == target[0] &amp;&amp; y == target[1]) return true;
			}
		}
		return cnt &gt;= 50000;
	}
	
	public boolean isEscapePossible(int[][] blocked, int[] source, int[] target) {
		return solve(blocked, source, target) &amp;&amp; solve(blocked, target, source);
	}
}
</PRE>

</BODY>
</HTML>
