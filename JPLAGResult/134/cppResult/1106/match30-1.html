<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>125_ryanwang.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>125_ryanwang.cpp</CENTER></H3><HR>
<PRE>
int vis[3007][3007];
class Solution {
public:
	struct Node {
		int x, y, o;
	} p[507];
	int Dx[507];
	int Dy[507];

	int dx[4] = { 0, 0, -1, 1};
	int dy[4] = { -1, 1, 0, 0};


	bool static cmp(Node&amp; a, Node&amp; b) {
		return a.x &lt; b.x;
	}

	bool static cmp2(Node&amp;a, Node&amp; b) {
		return a.y &lt; b.y;
	}

	bool isEscapePossible(vector&lt;vector&lt;int&gt;&gt;&amp; blocked, vector&lt;int&gt;&amp; source, vector&lt;int&gt;&amp; target) {
		int cnt = 0;
		int n = blocked.size();
        memset(vis, 0, sizeof(vis));
		for (int i = 0; i &lt; n; i++) {
			// cout &lt;&lt; &quot;DSF&quot; &lt;&lt; endl;
			p[++cnt] = Node{blocked[i][0], blocked[i][1], 1};
		}
		p[++cnt] = Node{0, 0, 0};
		p[++cnt] = Node{1000000, 1000000, 0};
		p[++cnt] = Node{source[0], source[1], 2};
		p[++cnt] = Node{target[0], target[1], 3};

		sort(p + 1, p + cnt + 1, cmp);

		for (int i = 2; i &lt;= cnt; i++) {
			Dx[i] = min(10, p[i].x - p[i - 1].x);
		}
		for (int i = 2; i &lt;= cnt; i++) {
			p[i].x = p[i - 1].x + Dx[i];
		}
		int N = p[cnt].x;

		sort(p + 1, p + cnt + 1, cmp2);

		for (int i = 2; i &lt;= cnt; i++) {
			Dy[i] = min(10, p[i].y - p[i - 1].y);
		}
		for (int i = 2; i &lt;= cnt; i++) {
			p[i].y = p[i - 1].y + Dy[i];
		}
		int M = p[cnt].y;
    
		// cout&lt;&lt;cnt&lt;&lt;endl;
		// for (int i = 1; i &lt;= cnt; i++) {
		// 	cout &lt;&lt; p[i].x &lt;&lt; ' ' &lt;&lt; p[i].y &lt;&lt; ' ' &lt;&lt; p[i].o &lt;&lt; endl;
		// }

		queue&lt;Node&gt; Q;
		for (int i = 1; i &lt;= cnt; i++) {
			if (p[i].o == 1) {
				vis[p[i].x][p[i].y] = -1;
			}
			else if (p[i].o == 2) {
				Q.push(Node{p[i].x, p[i].y, 0});
			}
			else if (p[i].o == 3) {
				vis[p[i].x][p[i].y] = 2;
			}
		}
        
        // for(int i=0; i&lt;N; i++) {
        //     for(int j=0; j&lt;M; j++) {
        //         cout&lt;&lt;vis[i][j]&lt;&lt;' ';
        //     }
        //     cout&lt;&lt;endl;
        // }
        
        
<A NAME="0"></A>		while (!Q.empty()) {
			Node u = Q.front(); Q.pop();
			// cout&lt;&lt;u.x&lt;&lt;u.y&lt;&lt;endl;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#0',2,'match30-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>			for (int i = 0; i &lt; 4; i++) {
				int Nx = u.x + dx[i];
				int Ny = u.y + dy[i];
				//cout&lt;&lt;Nx&lt;&lt;' '&lt;&lt;Ny&lt;&lt;endl;
				if (Nx &lt; 0 || Nx &gt;= N || Ny &lt; 0 || Ny &gt;= M) continue;
				if (vis[Nx][Ny] == -1) continue;</B></FONT>
				if (vis[Nx][Ny] == 1) continue;
				if (vis[Nx][Ny] == 2) return true;
				vis[Nx][Ny] = 1;
				Q.push(Node{Nx, Ny, 0});
			}
		}

		return false;
	}
};
</PRE>
</BODY>
</HTML>
