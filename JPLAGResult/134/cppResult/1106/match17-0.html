<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>6_betrue12.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>6_betrue12.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    bool isEscapePossible(vector&lt;vector&lt;int&gt;&gt;&amp; blocked, vector&lt;int&gt;&amp; source, vector&lt;int&gt;&amp; target) {
        set&lt;int&gt; xs, ys;
        for(auto&amp; v : blocked){
            for(int k=-1; k&lt;=1; k++){
                xs.insert(v[0]+k);
                ys.insert(v[1]+k);
            }
        }
        for(int k=-1; k&lt;=1; k++){
            xs.insert(source[0]+k);
            xs.insert(target[0]+k);
            ys.insert(source[1]+k);
            ys.insert(target[1]+k);
        }
        xs.insert(0);
        xs.insert(999999);
        ys.insert(0);
        ys.insert(999999);
        xs.erase(-1);
        xs.erase(1000000);
        ys.erase(-1);
        ys.erase(1000000);

        vector&lt;int&gt; xv, yv;
        for(int a : xs) xv.push_back(a);
        for(int a : ys) yv.push_back(a);
        
        int X = xs.size(), Y = ys.size();
        for(auto&amp; v : blocked){
            v[0] = lower_bound(xv.begin(), xv.end(), v[0]) - xv.begin();
            v[1] = lower_bound(yv.begin(), yv.end(), v[1]) - yv.begin();
        }
        source[0] = lower_bound(xv.begin(), xv.end(), source[0]) - xv.begin();
        source[1] = lower_bound(yv.begin(), yv.end(), source[1]) - yv.begin();
        target[0] = lower_bound(xv.begin(), xv.end(), target[0]) - xv.begin();
        target[1] = lower_bound(yv.begin(), yv.end(), target[1]) - yv.begin();

        typedef pair&lt;int, int&gt; P;
        int dx[] = {1, -1, 0, 0};
        int dy[] = {0, 0, 1, -1};
        queue&lt;P&gt; que;
        que.push({source[0], source[1]});
        bitset&lt;1000&gt; visited[1000], border[1000], B[1000];
        visited[source[0]][source[1]] = 1;
        for(auto&amp; v : blocked){
            B[v[0]][v[1]] = 1;
        }

        while(que.size()){
<A NAME="0"></A>            auto p = que.front(); que.pop();
            int i = p.first, j = p.second;
            for(int k=0; k&lt;4; k++){
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match17-1.html#0',3,'match17-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>                int x = i+dx[k], y = j+dy[k];
                if(0&lt;=x &amp;&amp; x&lt;X &amp;&amp; 0&lt;=y &amp;&amp; y&lt;Y &amp;&amp; !B[x][y]){
                    if(!visited[x][y]){
                        visited[x][y] = 1;
                        que.push({x, y});
                    }
                }
            }
        }
        return visited[target[0]][target[1]];
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
