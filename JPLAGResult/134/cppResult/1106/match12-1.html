<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>25_ZhongnianTao.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>25_ZhongnianTao.cpp</CENTER></H3><HR>
<PRE>
#define maxn 1000111
typedef pair&lt;int,int&gt; pii;
set&lt;int&gt; st[maxn];
<A NAME="0"></A>int mxstep=25000;

int dx[]={1,-1,0,0};
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match12-0.html#0',2,'match12-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int dy[]={0,0,1,-1};

bool in(int x,int y)
{
    return 0&lt;=x &amp;&amp; x&lt;1000000 &amp;&amp; 0&lt;=y &amp;&amp; y&lt;1000000;
}

int bfs(int posx,int posy,int tarx,int tary)
{</B></FONT>
    queue&lt;pii&gt; q;
    set&lt;pii&gt; vis;
    vis.clear();
    while (!q.empty()) q.pop();
    q.push(make_pair(posx,posy));
    vis.insert(make_pair(posx,posy));
<A NAME="1"></A>    for(int T=0;T&lt;mxstep &amp;&amp; !q.empty();T++)
    {
        int cx=q.front().first;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match12-0.html#1',2,'match12-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        int cy=q.front().second;
        q.pop();
        if (cx==tarx &amp;&amp; cy==tary) return 0;
        for(int k=0;k&lt;4;k++)
        {
            int nx=cx+dx[k],ny=cy+dy[k];
            if (!in(nx,ny)) continue;</B></FONT>
            if (st[nx].count(ny)) continue;
            if (!vis.count(make_pair(nx,ny)))
            {
                q.push(make_pair(nx,ny));
                vis.insert(make_pair(nx,ny));
            }
        }
        
    }
    
    if (q.empty()) return 1;
    else return 2;
}

class Solution {
public:
    bool isEscapePossible(vector&lt;vector&lt;int&gt;&gt;&amp; blocked, vector&lt;int&gt;&amp; source, vector&lt;int&gt;&amp; target) {
        for(int i=0;i&lt;maxn;i++) st[i].clear();
        for(auto x:blocked)
        {
            st[x[0]].insert(x[1]);
        }
        
        int sx=source[0],sy=source[1];
        int tx=target[0],ty=target[1];
        
        if (st[tx].count(ty)) return false;
        
        int v1=bfs(sx,sy,tx,ty);
        int v2=bfs(tx,ty,sx,sy);
        
        if (v1==0 || v2==0) return 1;
        if (v1==1 || v2==1) return 0;
        return 1;
        
    }
};
</PRE>
</BODY>
</HTML>
