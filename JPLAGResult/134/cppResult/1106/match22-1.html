<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>107_wangbin2360.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>107_wangbin2360.cpp</CENTER></H3><HR>
<PRE>

class Solution {
public:
    bool dfs(map&lt;int,map&lt;int,bool&gt;&gt; &amp;visited, map&lt;int,map&lt;int,bool&gt;&gt;&amp; block,int x,int y
             ,int b,int l,int t,int r,vector&lt;vector&lt;int&gt;&gt;&amp; dis,vector&lt;int&gt;&amp; target){
        bool ans = false;
        if(visited[x][y]) return false;
        if(x&lt;l || x&gt;r||y&lt;b||y&gt;r || (x==target[0]&amp;&amp;y==target[1])){
            return true;
        }
        visited[x][y] = true;
        for(int i = 0;i&lt;dis.size();i++){
            int newx = x+dis[i][0];
            int newy = y+dis[i][1];
            if(newx&lt;0 || newy&lt;0 || visited[newx][newy] || block[newx][newy]){
                continue;
            }
            ans = ans||dfs(visited, block, newx, newy, b, l, t, r, dis,target);
        }
        return ans;
    }
    
    bool isEscapePossible(vector&lt;vector&lt;int&gt;&gt;&amp; blocked, vector&lt;int&gt;&amp; source, vector&lt;int&gt;&amp; target) {
        int bottoms = max(-1,source[1]-200);
        int lefts = max(-1,source[0]-200);
        int tops = source[1]+200;
        int rights = source[0]+200;
        map&lt;int,map&lt;int,bool&gt;&gt; m;
        for(int i = 0;i&lt;blocked.size();i++){
            m[blocked[i][0]][blocked[i][1]]=true;
        }
        int bottomt = max(-1,target[1]-200);
        int leftt = max(-1,target[0]-200);
<A NAME="0"></A>        int topt = target[1]+200;
        int rightt = target[0]+200;
        map&lt;int,map&lt;int,bool&gt;&gt; visited1;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match22-0.html#0',2,'match22-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        map&lt;int,map&lt;int,bool&gt;&gt; visited2;
        bool ans = true;
        vector&lt;vector&lt;int&gt;&gt; dis={{1,0},{-1,0},{0,1},{0,-1}};</B></FONT>
        ans = ans&amp;&amp;dfs(visited1, m, source[0], source[1], bottoms, lefts, tops, rights, dis, target);
        ans = ans&amp;&amp;dfs(visited2, m, target[0], target[1], bottomt, leftt, topt, rightt, dis, target);
        return ans;
    }
};
</PRE>
</BODY>
</HTML>
