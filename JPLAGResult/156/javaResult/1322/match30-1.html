<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>159_shuoyan.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>159_shuoyan.java</CENTER></H3><HR>
<PRE>
class Solution {
    class Type{
        int x;
        int y;
        boolean vert;
        public Type(int x, int y, boolean vert){
            this.x = x;
            this.y = y;
            this.vert = vert;
        }
    }
    public int minimumMoves(int[][] grid) {
        int m = grid.length;
        int n = grid[0].length;

        Queue&lt;Type&gt; queue = new LinkedList&lt;&gt;();
        Set&lt;String&gt; visited = new HashSet&lt;&gt;();
<A NAME="0"></A>        queue.offer(new Type(0, 0, false));
        visited.add(&quot;&quot;+0+0+false);
        int step = 0;
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#0',2,'match30-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>while(!queue.isEmpty()){
            int size = queue.size();
            while(size--&gt;0){
                Type cur = queue.poll();
                if</B></FONT>(cur.x==m-1&amp;&amp;cur.y==n-2&amp;&amp;!cur.vert){
<A NAME="1"></A>                    return step;
                }
                int x = cur.x;
                <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#1',2,'match30-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int y = cur.y;
                boolean vert = cur.vert;
                if(!vert){
                    if(y&lt;n-2&amp;&amp;grid[x][y+2]==0){
                        String rr = &quot;&quot;+x+(y+1)+vert;
                        if(!visited.contains</B></FONT>(rr)){
                            queue.offer(new Type(x, y+1, vert));
                            visited.add(rr);
                        }
                    }
                    if(x&lt;m-1&amp;&amp;grid[x+1][y]==0&amp;&amp;grid[x+1][y+1]==0){
                        String cr = &quot;&quot;+x+y+(!vert);
                        if(!visited.contains(cr)){
                            queue.offer(new Type(x, y, !vert));
                            visited.add(cr);
                        }
                        String dd = &quot;&quot;+(x+1)+(y)+vert;
<A NAME="2"></A>                        if(!visited.contains(dd)){
                            queue.offer(new Type(x+1, y, vert));
                            visited.add(dd);
                        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#2',2,'match30-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
                    }
                }else{
                    if(y&lt;n-1&amp;&amp;grid[x+1][y+1]==0&amp;&amp;grid[x][y+1]==0){
                        String rm = &quot;&quot;+x+(y+1)+vert;
                        if(!visited.contains</B></FONT>(rm)){
                            queue.offer(new Type(x, y+1, vert));
                            visited.add(rm);
                        }
                        String rr = &quot;&quot;+x+y+(!vert);
                        if(!visited.contains(rr)){
                            queue.offer(new Type(x, y, !vert));
                            visited.add(rr);
                        }
                    }
                    if(x&lt;m-2&amp;&amp;grid[x+2][y]==0){
                        String dd = &quot;&quot;+(x+1)+y+vert;
<A NAME="3"></A>                        if(!visited.contains(dd)){
                            queue.offer(new Type(x+1, y, vert));
                            visited.add(dd);
                        <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#3',2,'match30-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
                    }
                }
            }
            step++;
        }
        return -1;
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
