<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>328_sggkjihua.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>328_sggkjihua.java</CENTER></H3><HR>
<PRE>
class Solution {
    public int minimumMoves(int[][] grid) {
        Set&lt;Integer&gt; set = new HashSet();
<A NAME="1"></A>        int n = grid.length;
        Queue&lt;int[]&gt; q = new LinkedList();
        // 1 代表是水平 -1 代表是竖直方向的
        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#1',2,'match31-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>q.offer(new int[]{0,1,1});
        int step = 0;
        while(!q.isEmpty()){
            int size = q.size();
            for(int i=0;i&lt;size;i++){
                int[] cur = q.poll();
                int x=cur[0], </B></FONT>y=cur[1], z=cur[2];
                if(x==n-1 &amp;&amp; y==n-1 &amp;&amp; z==1) return step;
                
                boolean right=z==1? out(x, y+1, grid, n): (out(x,y+1,grid,n) || out(x-1, y+1, grid, n));
                if(!right){
                    int index = z*(x*n+y+1);
                    if(!set.contains(index)){
                        set.add(index);
                        q.offer(new int[]{x, y+1, z});                   
                    }
                    //System.out.println(&quot;Step: &quot;+ step + &quot; x: &quot;+ x +&quot; y:&quot;+y +&quot; z:&quot;+z);
     
                }
                boolean down=z==1?(out(x+1, y, grid, n)||out(x+1, y-1, grid, n)): out(x+1,y,grid,n);
                if(!down){
<A NAME="2"></A>                    int index = z*((x+1)*n+y);
                    if(!set.contains(index)){
                        set.add(index);
                        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#2',2,'match31-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>q.offer(new int[]{x+1, y, z});                        
                    }
                }
                if(z==-1){</B></FONT>
                    boolean anticlock = out(x-1,y+1, grid, n) || out(x, y+1, grid, n);
                    if(!anticlock){
                        int index = -z*((x-1)*n+y+1);
                        if(!set.contains(index)){
                            set.add(index);
                            q.offer(new int[]{x-1, y+1, -z});                            
                        }

                    }
                }
                if(z==1){
                    boolean clock = out(x+1,y, grid,n) || out(x+1,y-1, grid,n);
                    if(!clock){
<A NAME="3"></A>                        int index = -z*((x+1)*n+y-1);
                        if(!set.contains(index)){
                            set.add(index);
                            <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#3',2,'match31-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>q.offer(new int[]{x+1, y-1, -z});                            
                        }

                    }
                }
            }
            step++;
        }
<A NAME="0"></A>        return -1;
    }
    
    private boolean out(int x, int y</B></FONT>, <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#0',2,'match31-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int[][] grid, int n){
        if(x&gt;n-1||y&gt;n-1) return true;
        return grid[x][y]==1;
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
