<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>323_bking2015.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>323_bking2015.java</CENTER></H3><HR>
<PRE>
class Solution {
    int HOR = 0;
        int VERT = 1;
    int inf = 987654321;
    int N, M;
    int[][] g2;
    public int minimumMoves(int[][] grid) {
        N = grid.length;
<A NAME="0"></A>        M = grid[0].length;
        g2 = grid;
        int[][][] table = new int[grid.length][grid[0].length][2];
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#0',2,'match6-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>for (int i = 0; i &lt; table.length; i++)
            for (int j = 0; j &lt; table.length; j++)
                for (int k = 0; k &lt; 2; k++)
                    table[i][j][k] = inf;
        
        table[0][0][HOR] = 0;
        
        Deque&lt;int[]&gt; q = new ArrayDeque&lt;&gt;();
        q.add(new int[]{0,0,HOR});
        while (!q.isEmpty()) {
            int[] x = q.removeFirst();
<A NAME="6"></A>            int i = x[0]; int j = x[1]; int d = x[2];
            // move right
            if</B></FONT> (d == HOR &amp;&amp; valid(i, j + 2)) {
                <FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#6',2,'match6-top.html#6',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (1 + table[i][j][d] &lt; table[i][j+1][d]) {
                    table[i][j+1][d] = 1 + table[i][j][d];
                    q.addLast(new int[]{i, j+1, d});
<A NAME="1"></A>                }
            }</B></FONT>
            // move down
            if (d == VERT &amp;&amp; valid(i+2, j)) <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#1',2,'match6-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
                if (1 + table[i][j][d] &lt; table[i+1][j][d]) {
                    table[i+1][j][d] = 1 + table[i][j][d];
                    q.addLast(new int[]{i+1, j, d});
<A NAME="2"></A>                }</B></FONT>
            }
            // move down while HOR
            if (d == HOR &amp;&amp; valid(i+1, j) &amp;&amp; valid(i + 1, j + 1)) <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#2',2,'match6-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
                if (1 + table[i][j][d] &lt; table[i+1][j][d]) {
                    table[i+1][j][d] = 1 + table[i][j][d];
                    q.addLast(new int[]{i+1, j, d});
<A NAME="4"></A>                }</B></FONT>
            }
            // move right while VERT
            if (d == VERT &amp;&amp; valid(i, j+1) &amp;&amp; valid(i + 1, j+1)) <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#4',2,'match6-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
                if (1 + table[i][j][d] &lt; table[i][j+1][d]) {
                    table[i][j+1][d] = 1 + table[i][j][d];
                    q.addLast(new int[]{i, j+1, d});
                }</B></FONT>
<A NAME="5"></A>            }
            
            // rotate down
            if (d == HOR &amp;&amp; valid(i + 1, j) &amp;&amp; valid(i + 1, j + 1)) <FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#5',2,'match6-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
                if (1 + table[i][j][HOR] &lt; table[i][j][VERT]) {
                    table[i][j][VERT] = 1 + table[i][j][HOR];
                    q.addLast(new int[]{i, j, VERT});
                }</B></FONT>
<A NAME="3"></A>            }
            // rotate right
            if (d == VERT &amp;&amp; valid(i, j+1) &amp;&amp; valid(i + 1, j + 1)) {
                <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#3',2,'match6-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>if (1 + table[i][j][VERT] &lt; table[i][j][HOR]) {
                    table[i][j][HOR] = 1 + table[i][j][VERT];
                    q.addLast(new int[]{i, j, HOR});
                }
            }
            
        }</B></FONT>
        
//         for (int i = 0; i &lt; N; i++)
//             System.out.println(Arrays.toString(grid[i]));
        
//         for (int i = 0; i &lt; N; i++) {
//             for (int j = 0; j &lt; M; j++) {
//                 System.out.print(Arrays.toString(table[i][j]) + &quot; &quot;);
//             }
//             System.out.println();
//         }
        
        return table[N-1][M-2][HOR] == inf ? -1 : table[N-1][M-2][HOR];
        
    }
    
    public boolean valid(int i, int j) {
        if (i &lt; 0 || j &lt; 0 || i &gt;= N || j &gt;= M) return false;
        return g2[i][j] == 0;
    }
    
}
</PRE>

</BODY>
</HTML>
