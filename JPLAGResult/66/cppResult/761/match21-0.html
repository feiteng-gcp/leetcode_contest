<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>90_democoffee.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>90_democoffee.cpp</CENTER></H3><HR>
<PRE>
/**
 * Definition for an interval.
 * struct Interval {
 *     int start;
 *     int end;
 *     Interval() : start(0), end(0) {}
 *     Interval(int s, int e) : start(s), end(e) {}
 * };
 */
class Solution {
public:
    vector&lt;Interval&gt; employeeFreeTime(vector&lt;vector&lt;Interval&gt;&gt;&amp; a) {
        int sz = a.size();
        auto cmp = [](const Interval &amp;i1, const Interval &amp;i2) {
            return i1.end &lt; i2.start;
        };  

        set&lt;Interval, decltype(cmp)&gt; sm(cmp);
        for (auto &amp;itvs : a) {
            for (auto &amp;itv : itvs) {
                auto rng = sm.equal_range(itv);
                if (rng.first == sm.end() || rng.first-&gt;start &gt; itv.end) {
                    sm.insert(itv);
                } else {
                    auto st = rng.first, ed = prev(rng.second);
                    sm.erase(rng.first, rng.second);
                    int sn = min(itv.start, st-&gt;start), en = max(itv.end, ed-&gt;end);
                    Interval toin(sn, en);
<A NAME="0"></A>                    sm.insert(toin);
                }   
            }   
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        }   

        vector&lt;Interval&gt; ans;
        int pre = -1; 
        for (auto &amp;itv: sm) {
            if (pre &gt;= 0) {
                Interval toin(pre, itv.start);
                ans.push_back(toin);
            }   
            pre = itv.end;
        }   

        return ans;
    }   
};</B></FONT>
</PRE>
</BODY>
</HTML>
