<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>108_frostfrog.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>108_frostfrog.cpp</CENTER></H3><HR>
<PRE>
/**
 * Definition for an interval.
 * struct Interval {
 *     int start;
 *     int end;
 *     Interval() : start(0), end(0) {}
 *     Interval(int s, int e) : start(s), end(e) {}
 * };
 */
class Solution {
public:
    vector&lt;Interval&gt; employeeFreeTime(vector&lt;vector&lt;Interval&gt;&gt;&amp; avails) {
        vector&lt;vector&lt;Interval&gt;&gt; second;
        
        
        for (auto &amp;a : avails) {
            int current = INT_MIN;
            vector&lt;Interval&gt; n;
            for (auto &amp;in : a) {
                n.emplace_back(current, in.start);
                current = in.end;
            }
            n.emplace_back(current, INT_MAX);
            second.push_back(move(n));
        }
        
        avails.swap(second);
        
        while (avails.size() &gt; 1) {
            second.clear();
            for (int i = 0; i &lt; avails.size(); i += 2) {
                if (i+1 &lt; avails.size()) {
                    second.push_back(freeTime(avails[i], avails[i+1]));
                } else {
                    second.push_back(avails[i]);
                }
            }
            avails.swap(second);
        }
        
        return vector&lt;Interval&gt;(avails[0].begin() + 1, avails[0].end() - 1);
    }
    
    vector&lt;Interval&gt; freeTime(vector&lt;Interval&gt; &amp;a, vector&lt;Interval&gt; &amp;b) {
        auto ait = a.begin();
        auto bit = b.begin();
        
        vector&lt;Interval&gt; res;
        
        while (ait != a.end() &amp;&amp; bit != b.end()) {
            int imax = max(ait-&gt;start, bit-&gt;start);
            int imin = min(ait-&gt;end, bit-&gt;end);
            
            if (imax &lt; imin) {
                res.emplace_back(imax, imin);
            }
<A NAME="0"></A>            
            if (ait-&gt;end &lt; bit-&gt;end) {
                ++ait;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match36-0.html#0',2,'match36-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            } else if (ait-&gt;end &gt; bit-&gt;end) {
                bit++;
            } else {
                ait++;
                bit++;
            }
        }
        
        return res;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
