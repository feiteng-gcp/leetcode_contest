<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>388_trikurw.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>388_trikurw.java</CENTER></H3><HR>
<PRE>
class Solution {
    public int numFriendRequests(int[] ages) {
        // time limit exceeded
        // first store the unique ages in a map
        // operate only on the unique ages
        // create a matrix whether age A can request age B
        HashMap&lt;Integer, Integer&gt; ageCountMap = new HashMap&lt;Integer, Integer&gt;();
        for (int i:ages) {
            if (ageCountMap.containsKey(i)) {
                int count = ageCountMap.get(i);
                ageCountMap.put(i, count+1);
            } else {
                ageCountMap.put(i, 1);
            }
        }
        
        // create a list of ages
        int[] uniqueAges = new int[ageCountMap.size()];
        int[] countAges = new int[ageCountMap.size()];
        int i=0;
        for (Map.Entry&lt;Integer, Integer&gt; entry:ageCountMap.entrySet()) {
            uniqueAges[i] = entry.getKey();
            countAges[i] = entry.getValue();
            i++;
        }
                
        // test if ageA can friend request B
        int countRequests = 0;
        int[][] canRequests = new int[uniqueAges.length][uniqueAges.length];
        for (i=0; i&lt;uniqueAges.length; i++) {
            for (int j=0; j&lt;uniqueAges.length; j++) {
                int ageA = uniqueAges[i];
                int ageB = uniqueAges[j];
                if (ageB &lt;= 0.5 * ageA + 7 || ageB &gt; ageA || (ageB &gt; 100 &amp;&amp; ageA &lt; 100)) {
                    // no friend requests
                } else {
                    // i request j
                    
                    if (i==j) {
                        // cannot requests him/herself
                        countRequests += countAges[i]*(countAges[i]-1);    
<A NAME="0"></A>                    } else {
                        countRequests += (countAges[i] * countAges[j]);    
                    }                    
                <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match24-1.html#0',3,'match24-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
            }
        }
        return countRequests;  
    }</B></FONT>
}
//   A B C
// A 0 1 1 
// B 1 0 1
// C 1 1 0
//    18    
// 17       
//[54,23,102,90,40,74,112,74,76,21]

//    17 17 17
// 16  1  1 1
// 16  1  1 1
    
</PRE>

</BODY>
</HTML>
