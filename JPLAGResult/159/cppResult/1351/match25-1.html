<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>394_kangbb.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>394_kangbb.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int balancedString(string s) {
        // suppost first n char of prefix is fixed
        int b = s.length() / 4;
        
        // 0 to index i
        int ret = INT_MAX;
        
<A NAME="0"></A>        int i, j;
        // check if we can get need[c];
        vector&lt;int&gt; last(4, 0);
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#0',2,'match25-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        for (j = s.length() - 1; j &gt;= 0; --j) {
            if (s[j] == 'Q' &amp;&amp; last[0] &lt; b) last[0] += 1;
            else if (s[j] == 'W' &amp;&amp; last[1] &lt; b) last[1] += 1;
            else if (s[j] == 'E' &amp;&amp; last[2] &lt; b) last[2] += 1;
            else if (s[j] == 'R' &amp;&amp; last[3] &lt; b) last[3] += 1;</B></FONT>
            else break;
        }
        
        vector&lt;int&gt; p(4, 0);
        for (i = 0; i &lt; s.length(); ++i) {
            // assume we take first length = i of prefix, and find the substring start from index i
<A NAME="1"></A>            
            while (j + 1 &lt; s.length()) {
                // check if it is invalid
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#1',2,'match25-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                if (p[0] + last[0] &gt; b ||
                    p[1] + last[1] &gt; b ||
                    p[2] + last[2] &gt; b ||
                    p[3] + last[3] &gt; b) {
                    
                    // cout &lt;&lt; j &lt;&lt; &quot; char= &quot; &lt;&lt; s[j] &lt;&lt; &quot; &quot; &lt;&lt; last[1]&lt;&lt; endl;
                    if (s[j + 1] == 'Q') --last[0];
                    else if (s[j + 1] == 'W') --last[1];
                    else if (s[j + 1] == 'E') --last[2];
                    else if (s[j + 1] == 'R') --last[3];
                    ++j;
                    
                } else {</B></FONT>
                    break;
                }
                // cout &lt;&lt; j &lt;&lt; endl;
            }
            
            // cout &lt;&lt; i &lt;&lt; &quot; - &quot; &lt;&lt; j &lt;&lt; &quot; = &quot; &lt;&lt; j - i + 1 &lt;&lt;  endl;
            // cout &lt;&lt; p[0] &lt;&lt; &quot; &quot; &lt;&lt; last[0] &lt;&lt; &quot; &quot; &lt;&lt; p[0] + last[0] &lt;&lt; endl;
            // cout &lt;&lt; p[1] &lt;&lt; &quot; &quot; &lt;&lt; last[1] &lt;&lt; &quot; &quot; &lt;&lt;p[1] + last[1] &lt;&lt; endl;
            // cout &lt;&lt; p[2] &lt;&lt; &quot; &quot; &lt;&lt; last[2] &lt;&lt; &quot; &quot; &lt;&lt;p[2] + last[2] &lt;&lt; endl;
            // cout &lt;&lt; p[3] &lt;&lt; &quot; &quot; &lt;&lt; last[3] &lt;&lt; &quot; &quot; &lt;&lt;p[3] + last[3] &lt;&lt; endl;
            ret = min(ret, max(0, j - i + 1));
            ret = min(ret, (int)s.length() - i);
            if (s[i] == 'Q') p[0] += 1;
            else if (s[i] == 'W') p[1] += 1;
            else if (s[i] == 'E') p[2] += 1;
            else if (s[i] == 'R') p[3] += 1;
            
            if (p[0] &gt; b) break;
            if (p[1] &gt; b) break;
            if (p[2] &gt; b) break;
            if (p[3] &gt; b) break;
        }
        return ret;
    }
};
</PRE>
</BODY>
</HTML>
