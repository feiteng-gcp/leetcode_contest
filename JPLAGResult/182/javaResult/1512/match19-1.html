<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>362_SiyC.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>362_SiyC.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class UndergroundSystem {
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match19-0.html#0',2,'match19-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Map&lt;Integer, String&gt; recordStation;    // 记录一个人的行程
        Map&lt;Integer, Integer&gt; recordTime;    // 记录一个人的行程
        Map&lt;String, Map&lt;String, Integer&gt;&gt; mapTimeSum;
        Map&lt;String, Map&lt;String, Integer&gt;&gt; mapTimeCount;

        public UndergroundSystem() {
            recordStation = new HashMap&lt;&gt;();
            recordTime = new HashMap&lt;&gt;();
            mapTimeCount = new HashMap&lt;&gt;();
            mapTimeSum = new HashMap&lt;&gt;();
        }

        public void checkIn(int id, String stationName, int t) {
            recordStation.put(id, stationName);
            recordTime.put(id, t);
        }

        public void checkOut(int id, String end, int t) {
            String start = recordStation.get(id);
            int prevTime = recordTime.get</B></FONT>(id);
            int timeCount = t - prevTime;

            mapTimeSum.putIfAbsent(start, new HashMap&lt;&gt;());
<A NAME="1"></A>            mapTimeCount.putIfAbsent(start, new HashMap&lt;&gt;());

            Map&lt;String, Integer&gt; mapSum = mapTimeSum.get(start);
            Map&lt;String, Integer&gt; mapCount = <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match19-0.html#1',2,'match19-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>mapTimeCount.get(start);

            mapSum.put(end, mapSum.getOrDefault(end, 0) + timeCount);
            mapCount.put(end, mapCount.getOrDefault(end, 0) + 1);
        }

        public double getAverageTime(String startStation, String endStation) {
            int sum = mapTimeSum.get(startStation).get(endStation)</B></FONT>;
            int count = mapTimeCount.get(startStation).get(endStation);
            return (sum + 0.0) / count;
        }
    }
/**
 * Your UndergroundSystem object will be instantiated and called as such:
 * UndergroundSystem obj = new UndergroundSystem();
 * obj.checkIn(id,stationName,t);
 * obj.checkOut(id,stationName,t);
 * double param_3 = obj.getAverageTime(startStation,endStation);
 */
</PRE>

</BODY>
</HTML>
