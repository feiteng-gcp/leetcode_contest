<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>141_CrossLuna.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>141_CrossLuna.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    bool equal(vector&lt;int&gt;&amp; A, int i, vector&lt;int&gt;&amp; pattern) {
        int np = pattern.size();
        for(int j = 0; j&lt;np; ++j) {
            if(A[i+j] != pattern[j]) return false;
        }
        return true;
    }
    vector&lt;int&gt; threeEqualParts(vector&lt;int&gt;&amp; A) {
<A NAME="0"></A>        int count_one = 0;
        for(auto n: A) {
            if(n == 1) ++count_one;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match32-0.html#0',2,'match32-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        }
        if(count_one == 0) {
            return {0, A.size()-1};
        }
        if(count_one % 3 != 0) return {-1, -1};
        int seg_one = count_one / 3;
        //int i, j, k;
        int k;</B></FONT>
        int cnt = 0;
        vector&lt;int&gt; pattern;
        for(int idx = A.size()-1; idx &gt;=0; --idx) {
            if(A[idx] == 1) {
                ++cnt;
                if(cnt == seg_one) {
                    //pattern.push_back(A.begin()+idx, A.end());
                    for(auto it = A.begin()+idx; it != A.end(); ++it) {
                        pattern.push_back(*it);
                    }
                    k = idx;
                    break;
                }
            }
        }
        /*
        for(auto p: pattern) {
            cout &lt;&lt; p &lt;&lt; ' ';
        }
        cout &lt;&lt; endl;
        cout &lt;&lt; &quot;k = &quot; &lt;&lt; k &lt;&lt; endl;
        */
        
        
        int np = pattern.size();
        int idx = 0;
        int i = -1;
        int j = -1;
        for(; idx &lt;= k-np; ++idx) {
            /*
            if(idx == 1) {
                cout &lt;&lt; A[idx] &lt;&lt; ' ' &lt;&lt; A[idx+1] &lt;&lt; ' ' &lt;&lt; A[idx+2] &lt;&lt; endl;
            }
            */
            if(equal(A, idx, pattern)) {
                i = idx;
                ++idx;
                break;
            }
        }
        //cout &lt;&lt; &quot;i = &quot; &lt;&lt; i &lt;&lt; endl;
        //cout &lt;&lt; &quot;idx = &quot; &lt;&lt; idx &lt;&lt; endl;
        if(i &lt; 0) return {-1, -1};
        
        for(; idx &lt;= k-np; ++idx) {
            //cout &lt;&lt; &quot;idx = &quot; &lt;&lt; idx &lt;&lt; endl;
            if(equal(A, idx, pattern)) {
                j = idx;
            }
        }
        //cout &lt;&lt; &quot;j = &quot; &lt;&lt; i &lt;&lt; endl;
        if(j &lt; 0 || j &lt;= i) return {-1, -1};
        //cout &lt;&lt; &quot;i = &quot; &lt;&lt; i &lt;&lt; &quot;, j = &quot; &lt;&lt; j &lt;&lt; &quot;, k = &quot;  &lt;&lt; k &lt;&lt; endl;
        // valid: i+np &lt;= j &amp;&amp; j + np &lt;= k
        if(i+np &lt;= j &amp;&amp; j + np &lt;= k) {
            return {i+np-1, j+np};
        }
        /*
        
        cout &lt;&lt; &quot;i = &quot; &lt;&lt; i &lt;&lt; &quot;, j = &quot; &lt;&lt; j &lt;&lt; &quot;, k = &quot;  &lt;&lt; k &lt;&lt; endl;
        bool cando = true;
        int idx = i, jdx = j, kdx = k;
        while(idx &gt;= 0 &amp;&amp; jdx &gt;= i+1 &amp;&amp; kdx &gt;= j+1) {
            if(A[idx] == 1 &amp;&amp; A[jdx] == 1 &amp;&amp; A[kdx] == 1) {
                count_one -= 3;
            }
            else if(A[idx] == 1 || A[jdx] == 1 || A[kdx] == 1) {
                cando = false;
                break;
            }
            --idx; --jdx; --kdx;
        }
        if(count_one != 0) cando = false;
        if(cando) {
            return {i, j+1};
        }
        else {
            return {-1, -1};
        }
        */
        
        return {-1, -1};
    }
};
</PRE>
</BODY>
</HTML>
