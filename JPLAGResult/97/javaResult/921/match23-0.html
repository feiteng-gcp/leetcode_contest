<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>53_abcdefat.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>53_abcdefat.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match23-1.html#0',3,'match23-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
    public int[][] spiralMatrixIII(int R, int C, int r0, int c0) {
        
        // use a string set to record the visited location
        int[][] moves = {{0,1}, {1,0}, {0, -1}, {-1, 0}};
        int di = 0</B></FONT>;
        int N = R * C;
        int count = 1;
        Set&lt;String&gt; set = new HashSet&lt;String&gt;();
        int[][] res = new int[N][2];
        res[0][0] = r0;
        res[0][1] = c0;
        set.add(String.valueOf(r0) + &quot;_&quot; + String.valueOf(c0));
        
        while (count &lt; N) {
            // make the move
            r0 += moves[di][0];
            c0 += moves[di][1];
            if (r0 &gt;= 0 &amp;&amp; r0 &lt; R &amp;&amp; c0 &gt;= 0 &amp;&amp; c0 &lt; C) {
                res[count][0] = r0;
                res[count][1] = c0;
                ++count;
            }
            String loc = String.valueOf(r0) + &quot;_&quot; + String.valueOf(c0);
            set.add(loc);
            // check whether can turn
            int di2 = (di+1)%4;
            int r1 = r0 + moves[di2][0];
            int c1 = c0 + moves[di2][1];
            String loc1 = String.valueOf(r1) + &quot;_&quot; + String.valueOf(c1);
            if (!set.contains(loc1)) di = di2;
            
        }
        
        return res;
    }
}
</PRE>

</BODY>
</HTML>
