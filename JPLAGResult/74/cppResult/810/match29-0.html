<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>19_jq_huang.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>19_jq_huang.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match29-1.html#0',3,'match29-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
public:
  bool validTicTacToe(vector&lt;string&gt;&amp; board) {
    int o = 0, x = 0;
    for (int i = 0; i != 3; ++i)
      for (int j = 0; j != 3; ++j) {</B></FONT>
        char c = board[i][j];
        if (c == 'X') ++x;
        if (c == 'O') ++o;
      }
    if (x - o &gt; 1 || o - x &gt; 0) return false;
    int owin = 0, xwin = 0;
    for (int i = 0; i != 3; ++i) {
      winner(board[i][0], board[i][1], board[i][2], owin, xwin);
      winner(board[0][i], board[1][i], board[2][i], owin, xwin);
    }
    winner(board[0][0], board[1][1], board[2][2], owin, xwin);
    winner(board[0][2], board[1][1], board[2][0], owin, xwin);
    if (owin &gt; 1 || xwin &gt; 1) return false;
    if (owin == 1 &amp;&amp; xwin == 1) return false;
    if (owin == 0 &amp;&amp; xwin == 0) return true;
    if (owin == 1) return x == o;
    if (xwin == 1) return x - 1 == o;
    return false;
  }
  
  void winner(char c1, char c2, char c3, int &amp;owin, int &amp;xwin) {
    if (c1 == 'X' &amp;&amp; c2 == 'X' &amp;&amp; c3 == 'X') ++xwin;
    if (c1 == 'O' &amp;&amp; c2 == 'O' &amp;&amp; c3 == 'O') ++owin;
  }
};
</PRE>
</BODY>
</HTML>
