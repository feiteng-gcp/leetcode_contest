<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>1_uwi.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>1_uwi.java</CENTER></H3><HR>
<PRE>
	class Solution {
<A NAME="0"></A>	    public boolean validTicTacToe(String[] board) {
	        char[] map = new char[9];
	        for(int i = 0;i &lt; 3;i++){
	        	for(int j = 0;<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>j &lt; 3;j++){
	        		map[i*3+j] = board[i].charAt(j);
	        	}
	        }</B></FONT>
	        int ox = 0;
	        for(int i = 0;i &lt; 9;i++){
	        	if(map[i] != ' ')ox++;
	        }
	        
	        int[] ord = new int[9];
	        for(int i = 0;i &lt; 9;i++)ord[i] = i;
	        outer:
	        do{
	        	for(int j = 0;j &lt; ox;j++){
	        		if(map[ord[j]] != (j%2 == 0 ? 'X' : 'O')){
	        			continue outer;
	        		}
	        	}
	        	char[] t = new char[9];
	        	Arrays.fill(t, ' ');
	        	for(int j = 0;j &lt; ox-1;j++){
	        		t[ord[j]] = map[ord[j]];
	        		if(end(t))continue outer;
	        	}
	        	return true;
	        }while(nextPermutation(ord));
	        return false;
	    }
	    
	    int[][] q = {
	    		{0, 1, 2},
	    		{3, 4, 5},
	    		{6, 7, 8},
	    		{0, 3, 6},
	    		{1, 4, 7},
	    		{2, 5, 8},
	    		{0, 4, 8},
	    		{2, 4, 6}
	    };
	    
	    boolean end(char[] t)
	    {
	    	for(int[] o : q){
	    		if(t[o[0]] != ' ' &amp;&amp; t[o[0]] == t[o[1]] &amp;&amp; t[o[1]] == t[o[2]])return true;
	    	}
	    	return false;
	    }
	    
	    public boolean nextPermutation(int[] a) {
			int n = a.length;
			int i;
			for (i = n - 2; i &gt;= 0 &amp;&amp; a[i] &gt;= a[i + 1]; i--)
				;
			if (i == -1)
				return false;
			int j;
			for (j = i + 1; j &lt; n &amp;&amp; a[i] &lt; a[j]; j++)
				;
			int d = a[i];
			a[i] = a[j - 1];
			a[j - 1] = d;
			for (int p = i + 1, q = n - 1; p &lt; q; p++, q--) {
				d = a[p];
				a[p] = a[q];
				a[q] = d;
			}
			return true;
		}
	}
</PRE>

</BODY>
</HTML>
