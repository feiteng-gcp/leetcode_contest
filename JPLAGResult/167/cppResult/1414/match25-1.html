<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>127_wifiii.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>127_wifiii.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int dis[55][55][2500];
    struct node {
        int x,y,k;
    };
    int shortestPath(vector&lt;vector&lt;int&gt;&gt;&amp; a, int K) {
        int n=a.size(),m=a[0].size();
        memset(dis,0x3f,sizeof(dis));
        int d1[] = {-1,1,0,0};
        int d2[] = {0,0,-1,1};
        queue&lt;node&gt; q;
<A NAME="0"></A>        dis[0][0][0] = 0;
        q.push({0,0,0});
        while(!q.empty()) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#0',2,'match25-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            node cur = q.front(); q.pop(); 
            // cout&lt;&lt;cur.x&lt;&lt;&quot; &quot;&lt;&lt;cur.y&lt;&lt;&quot; &quot;&lt;&lt;cur.k&lt;&lt;&quot; &quot;&lt;&lt;dis[cur.x][cur.y][cur.k]&lt;&lt;endl;
            for(int k=0;k&lt;4;++k) {
                int xx=cur.x+d1[k],yy=cur.y+d2[k];
                if(xx&lt;0||yy&lt;0||xx==n||yy==m) continue;
                if(a[xx][yy]) {
                    if(dis[xx][yy][cur.k+1] &lt; 1e9 || cur.k+1&gt;K) continue;</B></FONT>
                    dis[xx][yy][cur.k+1] = dis[cur.x][cur.y][cur.k] + 1;
                    q.push({xx,yy,1+cur.k});
                } else {
<A NAME="1"></A>                    if(dis[xx][yy][cur.k] &lt; 1e9) continue;
                    dis[xx][yy][cur.k] = dis[cur.x][cur.y][cur.k] + 1;
                    q.push({xx,yy,cur.k});
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#1',2,'match25-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                }
            }
        }
        int ret = 2e9;
        for(int i=0;i&lt;=K;++i) ret = min(ret, dis[n-1][m-1][i]);
        if(ret &gt; 1e9) return -1;
        return ret;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
