<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>193_zhengkai2001.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>193_zhengkai2001.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
	const vector&lt;vector&lt;int&gt;&gt; directions = vector&lt;vector&lt;int&gt;&gt;{
		vector&lt;int&gt;{0, 1},
		vector&lt;int&gt;{0, -1},
		vector&lt;int&gt;{1, 0} ,
		vector&lt;int&gt;{-1, 0}
	};

	int step;

	int slidingPuzzle(vector&lt;vector&lt;int&gt;&gt;&amp; board) {
		unordered_set&lt;int&gt; visited;
		queue&lt;vector&lt;vector&lt;int&gt;&gt;&gt; q;
		q.emplace(board);

		for (int step = 0; !q.empty(); step++) {
			int size = q.size();
			for (int qi = 0; qi &lt; size; qi++) {
				vector&lt;vector&lt;int&gt;&gt; b = q.front();
				q.pop();

				addToVisited(b, visited);

				if (isSolved(b)) {
					return step;
				}

				vector&lt;int&gt; pos = foundZero(b);
				int i = pos[0];
				int j = pos[1];

				for (vector&lt;int&gt; direction : directions) {
					int x = i + direction[0];
					int y = j + direction[1];
					if (0 &lt;= x &amp;&amp; x &lt;= 1 &amp;&amp; 0 &lt;= y &amp;&amp; y &lt;= 2) {
						vector&lt;vector&lt;int&gt;&gt; newB = b;

						int temp = newB[i][j];
						newB[i][j] = newB[x][y];
						newB[x][y] = temp;

						if (!isVisited(newB, visited)) {
							q.emplace(newB);
						}
					}
				}
			}
		}

		return -1;
<A NAME="0"></A>	}

	vector&lt;int&gt; foundZero(vector&lt;vector&lt;int&gt;&gt;&amp; board) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match11-0.html#0',2,'match11-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>		for (int i = 0; i &lt; 2; i++) {
			for (int j = 0; j &lt; 3; j++) {
				if (board[i][j] == 0) {</B></FONT>
					return vector&lt;int&gt;{i, j};
				}
			}
		}
		return vector&lt;int&gt;{-1, -1};
	}

	int getValue(vector&lt;vector&lt;int&gt;&gt;&amp; board) {
		return board[0][0] * 100000 + board[0][1] * 10000 + board[0][2] * 1000
			+ board[1][0] * 100 + board[1][1] * 10 + board[1][2];
	}

	void addToVisited(vector&lt;vector&lt;int&gt;&gt;&amp; board, unordered_set&lt;int&gt;&amp; visited) {
		visited.insert(getValue(board));
	}

	bool isVisited(vector&lt;vector&lt;int&gt;&gt;&amp; board, unordered_set&lt;int&gt;&amp; visited) {
		return visited.find(getValue(board)) != visited.end();
	}

	bool isSolved(vector&lt;vector&lt;int&gt;&gt;&amp; board) {
		return board[0][0] == 1 &amp;&amp; board[0][1] == 2 &amp;&amp; board[0][2] == 3
			&amp;&amp; board[1][0] == 4 &amp;&amp; board[1][1] == 5 &amp;&amp; board[1][2] == 0;
	}
};
</PRE>
</BODY>
</HTML>
