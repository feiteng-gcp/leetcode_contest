<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>6_cchao.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>6_cchao.cpp</CENTER></H3><HR>
<PRE>
#include &lt;bits/stdc++.h&gt;
using namespace std;
#define REP(i, n) for (int i = 0; i &lt; int(n); ++i)
#define REPE(i, a, b) for (int i = (a); i &lt;= int(b); ++i)
#define SZ(x) ((int)(x).size())
#define ALL(x) x.begin(), x.end()
#define PB push_back
#define EB emplace_back
using LL = long long;
using PII = pair&lt;int, int&gt;;
#define F first
#define S second
void R(int &amp;x) { scanf(&quot;%d&quot;, &amp;x); }
void R(LL &amp;x) { scanf(&quot;%lld&quot;, &amp;x); }
void R(double &amp;x) { scanf(&quot;%lf&quot;, &amp;x); }
template &lt;typename T&gt; void R(T &amp;t) { cin &gt;&gt; t; }
template &lt;typename T&gt; void R(vector&lt;T&gt; &amp;ar) {
  for (auto &amp;it : ar)
    R(it);
}
template &lt;typename T, typename... Args&gt; void R(T &amp;t, Args &amp;... args) {
  R(t);
  R(args...);
}

int d[50010];
vector&lt;vector&lt;int&gt;&gt; b;
int f() {
  int r = 0;
  REP(i, 2) REP(j, 3) r = r * 6 + b[i][j];
<A NAME="0"></A>  return r;
}
void g(int r) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match12-0.html#0',2,'match12-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>  for (int i = 1; i &gt;= 0; --i)
    for (int j = 2; j &gt;= 0; --j) {
      b[i][j] = r % 6;
      r /= 6;
    }</B></FONT>
}

const int dx[] = {1, 0, -1, 0};
const int dy[] = {0, 1, 0, -1};
class Solution {
public:
  int slidingPuzzle(vector&lt;vector&lt;int&gt;&gt; &amp;board) {
    memset(d, -1, sizeof d);
    b = board;
    int s = f();
    queue&lt;int&gt; q;
    q.push(s);
    d[s] = 0;
    while (q.size()) {
      int x = q.front(); q.pop(); g(x);
      REP(i, 2) REP(j, 3) if (b[i][j] == 0) {
        REP(t, 4) {
          int ti = i + dx[t];
          int tj = j + dy[t];
          if (ti &lt; 0 || tj &lt; 0 || ti &gt;= 2 || tj &gt;= 3) continue;
          swap(b[i][j], b[ti][tj]);
          int y = f();
          if (d[y] == -1 || d[x] + 1 &lt; d[y]) {
            d[y] = d[x] + 1;
            q.push(y);
          }
          swap(b[i][j], b[ti][tj]);
        }
        i = 3;
        break;
      }
    }
    b = {{1,2,3}, {4,5,0}};
    int t = f();
    return d[t];
  }
};
</PRE>
</BODY>
</HTML>
