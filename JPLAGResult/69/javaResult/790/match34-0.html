<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>254_FannyChung.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>254_FannyChung.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match34-1.html#0',3,'match34-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
	public boolean isIdealPermutation(int[] A) {
		int localCount = 0;
		for (int i = 0; i &lt; A.length - 1; i++) {
			if (A[i] &gt; A[i + 1]) {</B></FONT>
				localCount++;
			}
		}
		int[] tmp = new int[A.length];
		int globalCount = getCount(A, tmp, 0, A.length - 1);
		System.out.println(localCount + &quot; &quot; + globalCount);
		return localCount == globalCount;
	}

	private int getCount(int[] a, int[] tmp, int start, int end) {
		if (start &gt;= end)
			return 0;

		int mid = (start + end) &gt;&gt; 1;
		int c = getCount(a, tmp, start, mid) + getCount(a, tmp, mid + 1, end);
		c += merge(a, tmp, start, mid, end);
		return c;
	}

	private int merge(int[] a, int[] tmp, int start, int mid, int end) {
		int res = 0;
		int i = start, j = mid + 1, k = start;
		while (i &lt;= mid &amp;&amp; j &lt;= end) {
			if (a[i] &lt;= a[j]) {
				tmp[k++] = a[i++];
			} else {
				tmp[k++] = a[j++];
				res += mid - i + 1;
			}
		}
		while (i &lt;= mid) {
			tmp[k++] = a[i++];
		}
		while (j &lt;= end) {
			tmp[k++] = a[j++];
		}
		for (int k2 = start; k2 &lt;= end; k2++) {
			a[k2] = tmp[k2];
		}
		return res;
	}
}
</PRE>

</BODY>
</HTML>
