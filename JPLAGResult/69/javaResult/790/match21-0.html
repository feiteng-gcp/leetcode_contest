<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>170_bpnew.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>170_bpnew.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class Solution {
    <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>static int _mergeSort(int arr[], int temp[], int left, int right)
    {
      int mid, inv_count = 0;
      if (right &gt; left)
      {
        /* Divide the array into two parts and call _mergeSortAndCountInv()
           for each of the parts */
        mid = (right + left)/2;
      
        /* Inversion count will be sum of inversions in left-part, right-part
          and number of inversions in merging */
        inv_count  = _mergeSort(arr, temp, left, mid);
        inv_count += _mergeSort(arr, temp, mid+1, right);
      
        /*Merge the two parts*/
        inv_count += merge(arr, temp, left, mid+1, right);
      }
      return inv_count;
    }
      
    /* This method merges two sorted arrays and returns inversion count in
       the arrays.*/
    static int merge(int arr[], int temp[], int left, int mid, int right)
    {
      int i, j, k;
      int inv_count = 0</B></FONT>;
      
      i = left; /* i is index for left subarray*/
      j = mid;  /* j is index for right subarray*/
      k = left; /* k is index for resultant merged subarray*/
      while ((i &lt;= mid - 1) &amp;&amp; (j &lt;= right))
      {
        if (arr[i] &lt;= arr[j])
        {
          temp[k++] = arr[i++];
        }
        else
        {
<A NAME="1"></A>          temp[k++] = arr[j++];
      
         /*this is tricky -- see above explanation/diagram for merge()*/
          <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match21-1.html#1',3,'match21-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>inv_count = inv_count + (mid - i);
        }
      }
      
      /* Copy the remaining elements of left subarray
       (if there are any) to temp*/
      while (i &lt;= mid - 1)
        temp[k++] = arr[i++];
      
      /* Copy the remaining elements of right subarray
       (if there are any) to temp*/
      while (j &lt;= right)
        temp[k++] = arr[j++];</B></FONT>
      
      /*Copy back the merged elements to original array*/
      for (i=left; i &lt;= right; i++)
        arr[i] = temp[i];
      
      return inv_count;
    }
    public boolean isIdealPermutation(int[] A) {
        int temp[] = new int[A.length];
        int A1[]= new int[A.length];
        for(int i=0;i&lt;A.length;i++)
            A1[i]=A[i];
        int n1=_mergeSort(A, temp, 0, A.length - 1);
        int n2=0;
        for(int i=0;i&lt;A.length-1;i++){
         //System.out.println(i+&quot; &quot;+A[i]+&quot; &quot;+A[i+1]);
            if (A1[i]&gt;A1[i+1]) {
                n2++;
            }
        }
        //System.out.println(n1+&quot; &quot;+n2);
        return n1==n2;
    }
}
</PRE>

</BODY>
</HTML>
