<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>17_xuan18.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>17_xuan18.java</CENTER></H3><HR>
<PRE>
class Solution {
    
    class Board {
        int[][] board;
        int step;
        public Board(int[][] b) {
            step = 0;
            board = new int[2][3];
            for(int i=0;i&lt;2;i++) for(int j=0;j&lt;3;j++) board[i][j] = b[i][j];
        }
        
        public Board(int[][] b, int step) {
            this(b);
            setStep(step);
        }
        
        private void setStep(int step) {
            this.step = step;
        }
        
        public boolean equals(Object o) {
            if (o instanceof Board) return equals((Board) o);
            else return false;
        }
        public boolean equals(Board b) {
            for(int i=0;i&lt;2;i++) for(int j=0;j&lt;3;j++) {
                if (board[i][j] != b.board[i][j]) return false;
            }
            return true;
        }
        
        public int hashCode() {
            int ret = 0, base = 1;
            for(int i=0;i&lt;2;i++) for(int j=0;j&lt;3;j++) {
                ret = ret + base * board[i][j];
                base *= 6;
            }
            return ret;
        }
        
        public List&lt;Board&gt; getNext() {
            int nextstep = step + 1;
            for(int i=0;i&lt;2;i++) for(int j=0;j&lt;3;j++) if(board[i][j]==0) {
                LinkedList&lt;Board&gt; ret = new LinkedList&lt;Board&gt;();
                Board next;
                next = swap(i, j, 1-i, j);
                next.setStep(nextstep);
                ret.add(next);
                if(j!=0) {
                    next = swap(i, j, i, j-1);
                    next.setStep(nextstep);
                    ret.add(next);
                }
                if(j!=2) {
                    next = swap(i, j, i, j+1);
                    next.setStep(nextstep);
                    ret.add(next);
                }
                return ret;
            }
            throw new RuntimeException(&quot;No 0 found.&quot;);
        }
        
        private Board swap(int i1, int j1, int i2, int j2) {
            int[][] ret = new int[2][3];
            for(int i=0;i&lt;2;i++) for(int j=0;j&lt;3;j++) ret[i][j] = board[i][j];
            int tmp = ret[i1][j1];
            ret[i1][j1] = ret[i2][j2];
            ret[i2][j2] = tmp;
            return new Board(ret);
        }
        
    }
    
<A NAME="0"></A>    public int slidingPuzzle(int[][] board) {
        LinkedList&lt;Board&gt; bag = new LinkedList&lt;Board&gt;();
        Board target = new Board(
            <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#0',2,'match31-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>new int[][] {{1,2,3},{4,5,0}</B></FONT>}
        );
        bag.add(new Board(board));
        HashSet&lt;Board&gt; dedupe = new HashSet&lt;Board&gt;();
        while(bag.size()&gt;0) {
            Board curboard = bag.removeFirst();
            dedupe.add(curboard);
            if (curboard.equals(target)) {
                return curboard.step;
            }
            for(Board nextboard : curboard.getNext()) {
                if (!dedupe.contains(nextboard)) {
                    bag.add(nextboard);
                }
            }
        }
        return -1;
    }
}
</PRE>

</BODY>
</HTML>
