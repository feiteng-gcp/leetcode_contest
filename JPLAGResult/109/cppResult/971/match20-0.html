<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>8_sheepforever.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>8_sheepforever.cpp</CENTER></H3><HR>
<PRE>
const int N = 122;

int dis[N][N];
int vis[N][N];

int n, m;
vector&lt;vector&lt;int&gt;&gt; a;

int label;

<A NAME="0"></A>int dx[] = {-1, 1, 0, 0};
int dy[] = {0, 0, -1, 1};

<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match20-1.html#0',3,'match20-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>void dfs(int x, int y) {
    vis[x][y] = label;
    for (int k = 0; k &lt; 4; ++k) {
        int nx = x + dx[k];
        int ny = y + dy[k];
        if (nx &lt; 0 || ny &lt; 0 || nx &gt;= n || ny &gt;= m) continue;</B></FONT>
        if (!vis[nx][ny] &amp;&amp; a[nx][ny]) {
            dfs(nx, ny);
        }
    }
}

class Solution {
public:
    int shortestBridge(vector&lt;vector&lt;int&gt;&gt;&amp; A) {
        a = A;
        n = a.size();
        m = a[0].size();
<A NAME="1"></A>        memset(dis, 0x3F, sizeof(dis));
        memset(vis, 0, sizeof(vis));
        
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match20-1.html#1',3,'match20-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        int p1 = -1, q1;
        for (int i = 0; i &lt; n &amp;&amp; p1 == -1; ++i) {
            for (int j = 0; j &lt; m &amp;&amp; p1 == -1; ++j) {
                if (a[i][j]) {
                    p1 = i;</B></FONT>
                    q1 = j;
                    label = 1;
                    dfs(i, j);
<A NAME="2"></A>                }
            }
        }
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match20-1.html#2',3,'match20-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        int p2 = -1, q2;
        for (int i = 0; i &lt; n &amp;&amp; p2 == -1; ++i) {
            for (int j = 0; j &lt; m &amp;&amp; p2 == -1; ++j) {
                if (!vis[i][j] &amp;&amp; a[i][j]) {</B></FONT>
                    p2 = i;
                    q2 = j;
                    label = 2;
                    dfs(i, j);
                }
            }
        }
        // cout &lt;&lt; p1 &lt;&lt; &quot; &quot; &lt;&lt; q1 &lt;&lt; &quot; &quot; &lt;&lt; p2 &lt;&lt; &quot; &quot; &lt;&lt; q2 &lt;&lt; endl;
        queue&lt;pair&lt;int,int&gt;&gt; q;
        for (int i = 0; i &lt; n; ++i) {
            for (int j = 0; j &lt; m; ++j) {
                if (vis[i][j] == 1) {
                    dis[i][j] = 0;
                    q.push({i, j});
                }
            }
        }
        // for (int i = 0; i &lt; n; ++i) {
        //     for (int j = 0; j &lt; m; ++j) cout &lt;&lt; vis[i][j] &lt;&lt; &quot; &quot;;
        //     cout &lt;&lt; endl;
        // }
        int ans = 0x3F3F3F3F;
        while (!q.empty()) {
            int x = q.front().first;
            int y = q.front().second;
<A NAME="3"></A>            q.pop();
            if (vis[x][y] == 2) {
                ans = min(ans, dis[x][y]);
<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match20-1.html#3',3,'match20-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            }
            for (int k = 0; k &lt; 4; ++k) {
                int nx = x + dx[k];
                int ny = y + dy[k];
                if (nx &lt; 0 || ny &lt; 0 || nx &gt;= n || ny &gt;= m) continue;</B></FONT>
                if (dis[nx][ny] &gt; dis[x][y] + 1) {
                    dis[nx][ny] = dis[x][y] + 1;
                    q.push({nx, ny});
                }
            }
        }
        return ans - 1;
    }
};
</PRE>
</BODY>
</HTML>
