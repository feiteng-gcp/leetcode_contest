<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>205_sunqm.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>205_sunqm.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int numDupDigitsAtMostN(int N) {
        if (N &lt;= 10) {
            return 0;
        }
        
        int len = 0, tmp = N, digit[10] = {0};
        unordered_set&lt;int&gt; used_digits;
        while (tmp != 0) {
            len++;
            tmp /= 10;
        }
        
        tmp = N;
        for (int i = 1; i &lt;= len; i++) {
            digit[i] = tmp % 10;
            tmp /= 10;
        }
        
        tmp = N;
        int first_part[] = {0, 0, 9, 90, 738, 5274, 32490, 168570, 712890, 2345850};
        int ans = 0;
        while (len &gt; 0) {
            int cur_digit = digit[len];
            if (used_digits.size() == 0) {
                int first = first_part[len];
                int left_num = cur_digit - 1, left_part = 1, cnt = 9;
                for (int i = len-1; i &gt; 0; i--) {
                    left_part *= cnt;
                    cnt--;
                }
<A NAME="0"></A>                ans += first + left_part * left_num;
                cout &lt;&lt; ans &lt;&lt; endl;
            } else {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match15-0.html#0',2,'match15-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int cur_ans = 0;
                if (len &gt; 1) {
                    for (int i = 0; i &lt; cur_digit; i++) {
                        if (used_digits.find(i) == used_digits.end()) {
                            cur_ans++;
                        }</B></FONT>
                    }
                    int cnt = 9 - used_digits.size();
<A NAME="1"></A>                    for (int i = len-1; i &gt; 0; i--) {
                        cur_ans *= cnt;
                        cnt--;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match15-0.html#1',2,'match15-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                    }
                } else {
                    for (int i = 0; i &lt;= cur_digit; i++) {
                        if (used_digits.find(i) == used_digits.end()) {
                            cur_ans++;
                        }</B></FONT>
                    }
                }
                cout &lt;&lt; cur_ans &lt;&lt; endl;
                ans += cur_ans;
            }
            if (used_digits.find(cur_digit) != used_digits.end()) {
                break;
            }
            used_digits.insert(cur_digit);
            len--;
        }
        
        cout &lt;&lt; ans &lt;&lt; endl;
        return N-ans;
    }
};
</PRE>
</BODY>
</HTML>
