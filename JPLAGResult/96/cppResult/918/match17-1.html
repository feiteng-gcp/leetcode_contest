<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>3_igronemyk.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>3_igronemyk.cpp</CENTER></H3><HR>
<PRE>

class Solution {
private:
    const static int MAXN = 3010;
    const static int INF = 0x3f3f3f3f;
    typedef pair&lt;int,int&gt; Edge;
    vector&lt;Edge&gt; graph[MAXN];
    int dis[MAXN];
    bool visit[MAXN];
    void addEdge(int u,int v,int w) {
        graph[u].push_back(make_pair(v,w));
    }
    void spfa(int start) {
        memset(dis,INF,sizeof(dis));
        queue&lt;int&gt; que;
        que.push(start);
        dis[start] = 0;
        while(!que.empty()) {
            int now = que.front();
            que.pop();
            visit[now] = false;
            for(vector&lt;Edge&gt;::iterator it = graph[now].begin();it != graph[now].end();it++) {
                Edge &amp;tmpEdge = *it;
                if(dis[tmpEdge.first] &lt;= dis[now] + tmpEdge.second) continue;
                dis[tmpEdge.first] = dis[now] + tmpEdge.second;
                if(!visit[tmpEdge.first]) {
                    visit[tmpEdge.first] = true;
                    que.push(tmpEdge.first);
                }
            }
        }
    }

public:
    int reachableNodes(vector&lt;vector&lt;int&gt;&gt;&amp; edges, int M, int N) {
        int edgeSize = static_cast&lt;int&gt;(edges.size());
        for(int i = 0;i &lt; edgeSize;i++) {
<A NAME="0"></A>            int u = edges[i][0],v = edges[i][1],w = edges[i][2];
            addEdge(u,v,w + 1);
            addEdge(v,u,w + 1);
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match17-0.html#0',2,'match17-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        }
        spfa(0);
        int cnt = 0;
        for(int i = 0;i &lt; N;i++) {
            if(dis[i] &lt;= M) {
                cnt++;
            }
        }
        for(int i = 0;i &lt; edgeSize;i++) {</B></FONT>
            int u = edges[i][0],v = edges[i][1],w = edges[i][2],earnW = 0;
            if(dis[u] &lt;= M) {
                int leftStep = M - dis[u];
                earnW += leftStep;
            }
            if(dis[v] &lt;= M) {
                int leftStep = M - dis[v];
                earnW += leftStep;
            }
            earnW = min(earnW,w);
            cnt += earnW;
        }
        return cnt;
    }
};
</PRE>
</BODY>
</HTML>
