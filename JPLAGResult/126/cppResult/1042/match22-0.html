<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>51_lu-you-guan-guang.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>51_lu-you-guan-guang.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int dp[35][35];
    int f[35][35], sum[35];
    int mergeStones(vector&lt;int&gt;&amp; stones, int K) {
<A NAME="0"></A>        memset(dp, -1, sizeof(dp)); sum[0]=0;
        
        int n=stones.size();
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match22-1.html#0',3,'match22-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        for (int i=1; i&lt;=n; i++) dp[i][i]=0, sum[i]=sum[i-1]+stones[i-1];
        
<A NAME="1"></A>        for (int len=1; len&lt;=n; len++){
            for (int left=1; left&lt;=n; left++){</B></FONT>
                int right=left+len; if (right&gt;n) break;
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match22-1.html#1',3,'match22-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>                memset(f, -1, sizeof(f));
                f[left-1][0]=0;
                for (int j=left-1; j&lt;=right; j++){
                    for (int k=0; k&lt;=K; k++){</B></FONT>
                        if (f[j][k]==-1) continue;
                        for (int i=j+1; i&lt;=right; i++){
                            if (dp[j+1][i]==-1) continue;
                            if (f[i][k+1]==-1 || f[i][k+1]&gt;f[j][k]+dp[j+1][i]) f[i][k+1]=f[j][k]+dp[j+1][i];
                        }
                    }
                }
                if (f[right][K]==-1) continue;
                if (dp[left][right]==-1 || dp[left][right]&gt;f[right][K]+sum[right]-sum[left-1]) 
                    dp[left][right]=f[right][K]+sum[right]-sum[left-1];
            }
        }
        
        return dp[1][n];
    }
};
</PRE>
</BODY>
</HTML>
