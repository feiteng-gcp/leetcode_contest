<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>111_yuweiming70.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>111_yuweiming70.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    long long binji(vector&lt;int&gt; &amp;xs)
    {
        int n=xs.size()/2;
        long long ans=0;
        vector&lt;int&gt; all_x(xs);
        sort(all_x.begin(),all_x.end());
        all_x.erase(unique(all_x.begin(), all_x.end()), all_x.end());
        
        for(int i=0;i&lt;all_x.size()-1;i++)
        {
            int lo=all_x[i],hi=all_x[i+1];//对于一个极小区间来说，遍历一次xs，有的话加上去
            for(int j=0;j&lt;n;j++)
            {
                if(xs[2*j]&lt;=lo &amp;&amp; hi&lt;=xs[2*j+1])
                {
                    ans += hi-lo;
                    break;
                }
            }
        }
        return ans;
    }
    long long in_delta_y_area(vector&lt;vector&lt;int&gt;&gt;&amp; rectangles,int y_min,int y_max)
        //夹在y一定范围内的矩形的x都要加入一个列表，然后求出这些x的最大最小值
    {
        int n = rectangles.size();
        vector&lt;int&gt; xs;//所有矩形在y范围内的那些x1x2们
        for(int i=0;i&lt;n;i++)
        {
            int x1=rectangles[i][0],y1=rectangles[i][1],x2=rectangles[i][2],y2=rectangles[i][3];
            if(y1&lt;=y_min &amp;&amp; y_max&lt;=y2)
            {
                xs.push_back(x1);
                xs.push_back(x2);
            }
        }
        if(xs.size()==0)
            return 0;
        
<A NAME="0"></A>        long long sum_x =binji(xs);
        return sum_x*(long long)abs((long long)y_max-(long long)y_min);
    }
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#0',2,'match25-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    int rectangleArea(vector&lt;vector&lt;int&gt;&gt;&amp; rectangles) 
    {
        int n = rectangles.size();
        vector&lt;int&gt; all_y;
        for(int i=0;i&lt;n;i++)
        {
            all_y.push_back(rectangles[i][1]);all_y.push_back(rectangles[i][3]);
        }</B></FONT>
        sort(all_y.begin(),all_y.end());
        all_y.erase(unique(all_y.begin(), all_y.end()), all_y.end());
        
        /*for(int i=0;i&lt;all_y.size();i++)
            cout&lt;&lt;all_y[i]&lt;&lt;&quot; &quot;;
        cout&lt;&lt;endl;*/
        
        long long ans=0;
        for(int i=0;i&lt;all_y.size()-1;i++)
        {
            ans += in_delta_y_area(rectangles,all_y[i],all_y[i+1]);
        }
        return ans % 1000000007;
    }
};
</PRE>
</BODY>
</HTML>
