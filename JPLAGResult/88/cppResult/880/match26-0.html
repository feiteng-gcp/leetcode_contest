<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>71_lzs0902.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>71_lzs0902.cpp</CENTER></H3><HR>
<PRE>
typedef pair&lt;int,int&gt; per;
typedef pair&lt;per,per&gt; pp;
#define mp(x,y) make_pair(x,y)
typedef long long ll;
const int MOD = 1000000007;
class Solution {
public:
    int rectangleArea(vector&lt;vector&lt;int&gt;&gt;&amp; rec) {
        int n=rec.size();
		vector&lt;pp&gt;eg;
		vector&lt;int&gt;h;
		for(int i=0;i&lt;n;i++)
		{
			h.push_back(rec[i][1]);
			h.push_back(rec[i][3]);
		}
<A NAME="0"></A>		sort(h.begin(),h.end());
		unordered_map&lt;int,int&gt;mp;
		vector&lt;int&gt;fmp;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match26-1.html#0',3,'match26-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>		int k=0;
		for(int i=0;i&lt;h.size();i++)
		{
			if(!mp[h[i]])
			{
				mp[h[i]]=++k;
				fmp.push_back(h[i]);
			}</B></FONT>
		}
		for(int i=0;i&lt;n;i++)
		{
			eg.push_back(mp(mp(rec[i][0],1),mp(rec[i][1],rec[i][3])));
			eg.push_back(mp(mp(rec[i][2],0),mp(rec[i][1],rec[i][3])));
		}
		sort(eg.begin(),eg.end());
		int m=eg.size(),ret=0;
		vector&lt;int&gt;cnt(k+1);
		for(int i=0;i&lt;m;i++)
		{
			ll len=0;
			for(int j=2;j&lt;=k;j++)if(cnt[j])
			{
				len+=fmp[j-1]-fmp[j-2];
			}
			if(i)ret=(ret+(len%MOD)*(eg[i].first.first-eg[i-1].first.first)%MOD)%MOD;
			if(eg[i].first.second)
			{
				int ld=mp[eg[i].second.first],rd=mp[eg[i].second.second];
				for(int j=ld+1;j&lt;=rd;j++)
				{
					cnt[j]++;
				}
			}
			else
			{
				int ld=mp[eg[i].second.first],rd=mp[eg[i].second.second];
				for(int j=ld+1;j&lt;=rd;j++)
				{
					cnt[j]--;
				}
			}
		}
		return ret;
    }
};
</PRE>
</BODY>
</HTML>
