<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>65_aixiong.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>65_aixiong.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
	int rectangleArea(vector&lt;vector&lt;int&gt;&gt;&amp; rectangles) {
		n = rectangles.size();
		for (int i = 0; i &lt; n; ++i)
		{
			rect tmp;
			tmp.x1 = rectangles[i][0];
			tmp.y1 = rectangles[i][3];
			tmp.x2 = rectangles[i][2];
			tmp.y2 = rectangles[i][1];
			X.push_back(tmp.x1);
			X.push_back(tmp.x2);
			rects[i] = move(tmp);
		}
		sort(X.begin(), X.end());
		X.erase(unique(X.begin(), X.end()), X.end());
		ll res = 0;
		for (int i = 1; i &lt; X.size(); ++i)
		{
			int width = X[i] - X[i - 1];
			double mid = (X[i] + X[i - 1]) / 2;
			vector&lt;node&gt; nodes;
			for (int j = 0; j &lt; n; ++j)
			{
				if (rects[j].x1&lt;mid &amp;&amp; rects[j].x2&gt;mid)
				{
					nodes.emplace_back(rects[j].y2, rects[j].y1);
				}
<A NAME="0"></A>			}
			sort(nodes.begin(), nodes.end());
			int maxy = -1;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match29-1.html#0',3,'match29-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>			ll height = 0;
			for (int j = 0; j &lt; nodes.size(); ++j)
			{
				if (nodes[j].y1 &gt;= maxy)
				{
					height += nodes[j].y2 - nodes[j].y1;
					maxy = nodes[j].y2;
				}
				else</B></FONT>
				{
					if (nodes[j].y2 &gt;= maxy)
					{
						height += nodes[j].y2 - maxy;
						maxy = nodes[j].y2;
					}
				}
			}
			res = (height * width%M + res) % M;
		}
		return res;
	}
	using ll = long long;
	const static int N = 200 + 5;
	const int M = 1e9 + 7;
	struct rect
	{
		double x1, y1;
		double x2, y2;
	};
	struct node
	{
		node(double _y1, double _y2) :y1(_y1), y2(_y2) {}
		double y1, y2;
		bool operator&lt;(const node&amp; other)const
		{
			return y1 &lt; other.y1 || y1 == other.y1 &amp;&amp; y2&gt;other.y2;
		}
	};

	int n;
	rect rects[N];
	vector&lt;double&gt; X;
};
</PRE>
</BODY>
</HTML>
