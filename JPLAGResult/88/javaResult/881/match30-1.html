<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>208_2499370956.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>208_2499370956.java</CENTER></H3><HR>
<PRE>
class Solution {
    public int[] loudAndRich(int[][] richer, int[] quiet) {
        int N = quiet.length;
        List&lt;Integer&gt; reverseQuiet = IntStream.range(0, N).boxed().sorted(new Comparator&lt;Integer&gt;() {
            @Override
            public int compare(Integer o1, Integer o2) {
                return Integer.compare(quiet[o1], quiet[o2]);
            }
        }).collect(Collectors.toList());
        Map&lt;Integer, List&lt;Integer&gt;&gt; E = new HashMap&lt;&gt;();
        int[] indegree = new int[N];
<A NAME="0"></A>        for (int[] e : richer) {
            E.computeIfAbsent(e[0], i -&gt; new ArrayList&lt;&gt;()).add(e[1]);
            indegree[e[1]]++;
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#0',2,'match30-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        Queue&lt;Integer&gt; q = new LinkedList&lt;&gt;();
        for (int i = 0; i &lt; N; i++) {
            if (indegree[i] == 0) {</B></FONT>
                q.add(i);
            }
        }
        Map&lt;Integer, Set&lt;Integer&gt;&gt; A = new HashMap&lt;&gt;();
        for (int i = 0; i &lt; N; i++) {
<A NAME="1"></A>            Set&lt;Integer&gt; s = new HashSet&lt;&gt;();
            s.add(i);
            A.put(i, s);
        <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match30-0.html#1',2,'match30-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
        while (!q.isEmpty()) {
            int i = q.remove();
            for (int j</B></FONT> : E.getOrDefault(i, Collections.emptyList())) {
                indegree[j]--;
                if (indegree[j] == 0) {
                    q.add(j);
                }
                A.get(j).addAll(A.get(i));
            }
        }
        int[] a = new int[N];
        for (int i = 0; i &lt; N; i++) {
            Set&lt;Integer&gt; s = A.get(i);
            for (int j = 0; j &lt; N; j++) {
                if (s.contains(reverseQuiet.get(j))) {
                    a[i] = reverseQuiet.get(j);
                    break;
                }
            }
        }
        return a;
    }

    public static void main(String[] args) {
        Solution s = new Solution();
//        System.out.println(s.shiftingLetters(&quot;mkgfzkkuxownxvfvxasy&quot;, new int[] {505870226,437526072,266740649,224336793,532917782,311122363,567754492,595798950,81520022,684110326,137742843,275267355,856903962,148291585,919054234,467541837,622939912,116899933,983296461,536563513}));
//        System.out.println(s.maxDistToClosest(new int[] {1,0,0,0,1,0,1}));
//        System.out.println(s.maxDistToClosest(new int[] {1,0,0,0}));
        System.out.println(Arrays.toString(s.loudAndRich(new int[][] {{1,0},{2,1},{3,1},{3,7},{4,3},{5,3},{6,3}}, new int[] {3,2,5,4,6,1,7,0})));
        System.out.println(s);
        System.out.println(s);
        System.out.println(s);
    }
}
</PRE>

</BODY>
</HTML>
