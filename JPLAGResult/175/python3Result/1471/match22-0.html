<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>146_tommyjiang.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>146_tommyjiang.py</CENTER></H3><HR>
<PRE>
class Solution:
    def maxStudents(self, seats: List[List[str]]) -&gt; int:
        
        
        
        dp = dict()
        
        def convert(seats):
            return tuple(tuple(x) for x in seats)
<A NAME="0"></A>        
        res = 0
        
        m, n = len(seats), len<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match22-1.html#0',3,'match22-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>(seats[0])
        
        ava = []
        for i in range(m):
            for j in range(n):
                if seats[i][j] == '.':
                    ava.append([i, </B></FONT>j])
        
        # print(ava)
        
        def dfs(seats, ava):
            # for x in seats:
            #     print(x)
            # print(ava)
            c = convert(seats)
            
            if c in dp:
                return dp[c]
            
            if ava == []:
                return 0
            
            res = 0
            
            avaj = set()
            
            for x in ava:
                avaj.add(x[1])
            
            for j in sorted(list(avaj)):
                temp_ava = ava[:]
                temp_seat = [x[:] for x in seats]
                
                count = 0
                for i in range(m):
                    if temp_seat[i][j] == '#':
                        continue
                    
                    count += 1
                    temp_seat[i][j] = '#'
                    temp_ava.remove([i, j])

                    if j &gt; 0 and temp_seat[i][j-1] == '.':  # 左侧
                        temp_seat[i][j-1] = '#'
                        temp_ava.remove([i, j-1])

                    if i &gt; 0 and j &gt; 0 and temp_seat[i-1][j-1] == '.':  # 左前
                        temp_seat[i-1][j-1] = '#'
                        temp_ava.remove([i-1, j-1])

                    if j &lt; n - 1 and temp_seat[i][j+1] == '.':  # 右侧
                        temp_seat[i][j+1] = '#'
                        temp_ava.remove([i, j+1])

                    if i &gt; 0 and j &lt; n - 1 and temp_seat[i-1][j+1] == '.':  # 右前
                        temp_seat[i-1][j+1] = '#'
                        temp_ava.remove([i-1, j+1])

                    if i &lt; m - 1 and j &gt; 0 and temp_seat[i+1][j-1] == '.': # 左后
                        temp_seat[i+1][j-1] = '#'
                        temp_ava.remove([i+1, j-1])

                    if i &lt; m - 1 and j &lt; n - 1 and temp_seat[i+1][j+1] == '.': # 右后
                        temp_seat[i+1][j+1] = '#'
                        temp_ava.remove([i+1, j+1])
                
                res = max(res, count + dfs(temp_seat, temp_ava))
            
            dp[c] = res
            return res
        
        ans = dfs(seats, ava)
        return ans
</PRE>

</BODY>
</HTML>
