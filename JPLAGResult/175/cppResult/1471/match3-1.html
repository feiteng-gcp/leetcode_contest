<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>242_dyh14.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>242_dyh14.cpp</CENTER></H3><HR>
<PRE>
const int maxv = 100;
const int di[] = {-1, -1, 0, 0};
const int dj[] = {-1, 1, -1, 1};
<A NAME="0"></A>
class Solution {
private:
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match3-0.html#0',2,'match3-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    int V;
    vector&lt;int&gt; G[maxv];
    int match[maxv];
    bool used[maxv];
    
    void add_edge(int u, int v){
        G[u].push_back(v);
        G[v].push_back(u);
    }
    
    bool dfs(int u){
        used[u] = true;
        for(int i = 0; i &lt; G[u].size(); i++){
            int v = G[u][i], w = match[v];
            if(w &lt; 0 || !used[w] &amp;&amp; dfs(w)){
                match[u] = v;
                match[v] = u;
                return true;
            }
        }
        return false;
    }
    
    int bi(){
        int ans = 0;</B></FONT>
        for(int i = 0; i &lt; V; i++) match[i] = -1;
        for(int u = 0; u &lt; V; u++){
            if(match[u] &lt; 0){
                memset(used, 0, sizeof(used));
                if(dfs(u)) ans++;
            }
        }
        return ans;
    }
    
public:
    int maxStudents(vector&lt;vector&lt;char&gt;&gt;&amp; seats) {
        
        int m = seats.size();
        int n = seats[0].size();
<A NAME="1"></A>        int num = 0;
        V = m * n;
        
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match3-0.html#1',2,'match3-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        for(int i = 0; i &lt; m; i++){
            for(int j = 0; j &lt; n; j++){
                if(seats[i][j] == '.'){
                    num++;
                    for(int k = 0; k &lt; 4; k++){
                        int ii = i + di[k];
                        int jj = j + dj[k];
                        if(ii &gt;= 0 &amp;&amp; ii &lt; m &amp;&amp; jj &gt;= 0 &amp;&amp; jj &lt; n &amp;&amp; seats[ii][jj] == '.'){
                            add_edge(i * n + j, ii * n + jj);
                        }
                    }
                }
            }
        }
        
        return num - bi();
    }</B></FONT>
};
</PRE>
</BODY>
</HTML>
