<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>38_Jesko.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>38_Jesko.java</CENTER></H3><HR>
<PRE>
class Solution {
    char[][] arr;
    int t;
    int co = 4000;
    public int minPushBox(char[][] grid) {
        HashSet&lt;Integer&gt; vst = new HashSet&lt;&gt;();
        arr = grid;
<A NAME="0"></A>        int m = grid.length;
        int n = grid[0].length;
        State cur = new State();
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match32-1.html#0',3,'match32-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>for(int i = 0; i &lt; m; ++i) {
            for(int j = 0; j &lt; n; ++j) {
                if(arr[i][j] == 'T') {
                    t = i * n + j;
                    arr[i][j] = '.';
                } else if(arr[i][j] == 'S') {
                    cur.player = i * n + j;
                    arr[i][j] = '.';
                } else if(arr[i][j] == 'B') {
                    cur.box = i * n + j;
                    arr[i][j] = '.';
                }
            }
        }</B></FONT>
        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(11, new Comparator&lt;State&gt;(){
            public int compare(State a, State b) {
                return a.step - b.step;
            }
        });
        pq.add(cur);
        vst.add(cur.player * co + cur.box);
        int[] dx = {0, 0, 1, -1};
        int[] dy = {1, -1, 0, 0};
<A NAME="1"></A>        while(!pq.isEmpty()) {
            State cx = pq.poll();
            int cp = cx.player;
            <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match32-1.html#1',3,'match32-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int cb = cx.box;
            int ax = cp / n;
            int ay = cp % n;
            int bx = cb / n;
            int by = cb % n;
            for(int k = 0; k &lt; 4; ++k) {
                int nx = ax + dx[k];
                int ny = ay + dy[k];
                if</B></FONT>(nx &lt; 0 || ny &lt; 0 || nx ==m || ny == n || arr[nx][ny] != '.') continue;
                int np = nx * n + ny;
                if(np != cb) {
                    if(vst.contains(np * co + cb)) continue;
                    State nst = new State();
                    nst.player = np;
                    nst.box = cb;
                    nst.step = cx.step;
                    vst.add(np * co + cb);
                    pq.add(nst);
                } else {
                    int nbx = bx + dx[k];
                    int nby = by + dy[k];
                    if(nbx &lt; 0 || nby &lt; 0 || nbx ==m || nby == n || arr[nbx][nby] != '.') continue;
                    int nbb = nbx * n + nby;
                    if(nbb == t) return cx.step + 1;
                    if(vst.contains(np * co + nbb)) continue;
                    State nst = new State();
                    nst.player = np;
                    nst.box = nbb;
                    nst.step = cx.step + 1;
                    vst.add(np * co + nbb);
                    pq.add(nst);
                }
            }
        }
        return -1;
    }
    class State {
        int player;
        int box;
        int step;
    }
}
</PRE>

</BODY>
</HTML>
