<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>159_vincentpetergalloro.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>159_vincentpetergalloro.java</CENTER></H3><HR>
<PRE>

import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Objects;

class SolState{
    int px,py,bx,by;
<A NAME="0"></A>    SolState(int px, int py, int bx, int by){
        this.px = px;
        this.py = py;
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match34-1.html#0',3,'match34-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>this.bx = bx;
        this.by = by;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;</B></FONT>
        if (!(o instanceof SolState)) return false;
        SolState solState = (SolState) o;
        return px == solState.px &amp;&amp;
<A NAME="1"></A>                py == solState.py &amp;&amp;
                bx == solState.bx &amp;&amp;
                by == solState.by;
    <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match34-1.html#1',3,'match34-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}

    @Override
    public int hashCode() {
        return Objects.hash(px, py, bx, by);
    }
}</B></FONT>
<A NAME="2"></A>
class Solution {
    public int minPushBox(char[][] grid) {
        <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match34-1.html#2',3,'match34-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int tx = -1, ty = -1;
        int px = -1, py = -1;
        int bx = -1, by = -1;
<A NAME="3"></A>        for(int y = 0; y &lt; grid.length; y++){ for(int x = 0; x &lt; grid[0].length; x++){
            if(grid[y][x]=='T'){ tx=x; t</B></FONT>y=y; }
            if(grid[y][x]=='S'){ px=x; py=y; }
            if(grid[y][x]=='B'){ <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match34-1.html#3',3,'match34-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>bx=x; by=y; }
            } }

        HashSet&lt;SolState&gt; done = new</B></FONT> HashSet&lt;&gt;();
        HashMap&lt;Integer, ArrayList&lt;SolState&gt;&gt; open = new HashMap&lt;&gt;();
        open.put(0, new ArrayList&lt;&gt;());
        open.get(0).add(new SolState(px, py, bx, by));
        done.add(new SolState(px, py, bx, by));

        while(!open.isEmpty()){
            int mk = open.keySet().stream().mapToInt(i -&gt; i).min().orElse(-1);
            SolState current = open.get(mk).remove(0);
            if(open.get(mk).isEmpty()){ open.remove(mk); }

            int[][] ns = {{0,-1},{1,0},{0,1},{-1,0}};
            for(int i = 0; i &lt; 4; i++){
                int npx = current.px+ns[i][0], npy = current.py+ns[i][1];
                if(npx&lt;0||npx&gt;=grid[0].length || npy&lt;0 || npy&gt;=grid.length || grid[npy][npx]=='#'){ continue; }
                int nbx = current.bx, nby = current.by;
                int inc = 0;
                if(npx==current.bx &amp;&amp; npy==current.by){
                    inc = 1;
                    nbx = current.bx+ns[i][0];
                    nby = current.by+ns[i][1];
                    if(nbx&lt;0||nbx&gt;=grid[0].length || nby&lt;0 || nby&gt;=grid.length || grid[nby][nbx]=='#'){ continue; }

                    if(nbx==tx &amp;&amp; nby==ty){ return mk+inc; }
                }

                SolState nns = new SolState(npx, npy, nbx, nby);
                if(!done.contains(nns)){
                    done.add(nns);
<A NAME="4"></A>                    int pppp = mk + inc;
                    if(!open.containsKey(pppp)){ open.put(pppp, new ArrayList&lt;&gt;()); }
                    open.get(pppp).add(nns);
                <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match34-1.html#4',3,'match34-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
            }

        }


        return -1;
    }</B></FONT>
}
</PRE>

</BODY>
</HTML>
