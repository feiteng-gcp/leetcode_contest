<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>18_NEU20133823.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>18_NEU20133823.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#0',2,'match31-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int dir[4][2]={{-1,0},{0,-1},{1,0},{0,1}};
bool vis[20][20][20][20];
struct fff
{
    int bx,by,sx,sy,steps;</B></FONT>
    bool operator &lt; (const fff &amp;a) const {return steps&gt;a.steps;}
};
class Solution {
public:
    int minPushBox(vector&lt;vector&lt;char&gt;&gt;&amp; grid) {
<A NAME="1"></A>        int n=grid.size(),m=grid[0].size();
        memset(vis,0,sizeof(vis));
        fff now;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#1',2,'match31-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        for(int i=0;i&lt;n;i++)
        {
            for(int j=0;j&lt;m;j++)
            {
                if(grid[i][j]=='B')
                {
                    now.bx=i;
                    now.by=j;
                }
                else if(grid[i][j]=='S')
                {
                    now.sx=i;
                    now.sy=j;
                }
            }
        }</B></FONT>
        now.steps=0;
        priority_queue&lt;fff&gt; q;
        q.push(now);
        vis[now.bx][now.by][now.sx][now.sy]=true;
        while(!q.empty())
        {
            now=q.top();
            q.pop();
            if(grid[now.bx][now.by]=='T')return now.steps;
            fff news;
            for(int i=0;i&lt;4;i++)
            {
                news.sx=now.sx+dir[i][0];
                news.sy=now.sy+dir[i][1];
                if(news.sx&gt;=0&amp;&amp;news.sx&lt;n&amp;&amp;news.sy&gt;=0&amp;&amp;news.sy&lt;m)
                {
                    if(news.sx==now.bx&amp;&amp;news.sy==now.by)
                    {
                        news.bx=now.bx+dir[i][0];
                        news.by=now.by+dir[i][1];
                        news.steps=now.steps+1;
                        if(news.bx&gt;=0&amp;&amp;news.bx&lt;n&amp;&amp;news.by&gt;=0&amp;&amp;news.by&lt;m&amp;&amp;grid[news.bx][news.by]!='#')
                        {
                            if(!vis[news.bx][news.by][news.sx][news.sy])
                            {
                                vis[news.bx][news.by][news.sx][news.sy]=true;
                                q.push(news);
                            }
                        }
                    }
                    else if(grid[news.sx][news.sy]!='#')
                    {
                        news.bx=now.bx;
                        news.by=now.by;
                        news.steps=now.steps;
                        if(!vis[news.bx][news.by][news.sx][news.sy])
                        {
                            vis[news.bx][news.by][news.sx][news.sy]=true;
                            q.push(news);
                        }
                    }
                }
            }
        }
        return -1;
    }
};
</PRE>
</BODY>
</HTML>
