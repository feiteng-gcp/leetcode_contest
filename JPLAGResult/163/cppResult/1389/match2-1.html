<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>104_vipjml.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>104_vipjml.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int minPushBox(vector&lt;vector&lt;char&gt;&gt;&amp; grid) {
        int N=grid.size();
        int M=grid[0].size();
<A NAME="1"></A>        vector&lt;vector&lt;bool&gt;&gt; vis(M*N,vector&lt;bool&gt;(M*N,false));
        int pa,pb,ba,bb;
        for(int i=0;i&lt;N;i++)
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match2-0.html#1',2,'match2-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            for(int j=0;j&lt;M;j++){
                if(grid[i][j]=='S'){
                    pa=i;
                    pb=j;
                }else if(grid[i][j]=='B'){
                    ba=i;
                    bb=j;
                }
            }</B></FONT>
        int pt=pa*M+pb;
        int bt=ba*M+bb;
<A NAME="0"></A>        queue&lt;vector&lt;int&gt;&gt; qq;
        qq.push(vector&lt;int&gt;({pa,pb,ba,bb,0}));
        vis[pt][bt]=true;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match2-0.html#0',2,'match2-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        int dd[][2]={{1,0},{-1,0},{0,1},{0,-1}};</B></FONT>
        int ans=INT_MAX;
        while(!qq.empty()){
            auto p=qq.front();
            qq.pop();
            if(grid[p[2]][p[3]]=='T'){
                ans=min(ans,p[4]);
                continue;
            }
            if((p[0]==p[2]&amp;&amp;abs(p[1]-p[3])==1)||(p[1]==p[3]&amp;&amp;abs(p[0]-p[2])==1)){
                int aaa=2*p[2]-p[0];
                int bbb=2*p[3]-p[1];
                if(bbb&gt;=0&amp;&amp;bbb&lt;M&amp;&amp;aaa&gt;=0&amp;&amp;aaa&lt;N&amp;&amp;grid[aaa][bbb]!='#'){
                    int bbt=aaa*M+bbb;
                    int ppt=p[0]*M+p[1];
                    if(!vis[ppt][bbt]){
                        qq.push(vector&lt;int&gt;{p[0],p[1],aaa,bbb,p[4]+1});
                        vis[ppt][bbt]=true;
                    }
<A NAME="2"></A>                }
            }
            
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match2-0.html#2',2,'match2-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            for(int i=0;i&lt;4;i++){
                int ppa=p[0]+dd[i][0];
                int ppb=p[1]+dd[i][1];
                if(ppa==p[2]&amp;&amp;ppb==p[3]) continue;
                if(ppa&lt;0||ppa&gt;=N||ppb&lt;0||ppb&gt;=M) continue;
                if(grid[ppa][ppb]=='#') continue;</B></FONT>
                int ppt=ppa*M+ppb;
                int bbt=p[2]*M+p[3];
                if(vis[ppt][bbt]) continue;
                qq.push(vector&lt;int&gt;{ppa,ppb,p[2],p[3],p[4]});
                vis[ppt][bbt]=true;
            }
        }
        return ans==INT_MAX?-1:ans;
    }
};
</PRE>
</BODY>
</HTML>
