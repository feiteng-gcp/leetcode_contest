<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>17_DickLearning.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>17_DickLearning.cpp</CENTER></H3><HR>
<PRE>
class Solution {
    int n, m, sx, sy, ex, ey, bx, by;
    bool g[22][22];
    bool vis[22][22];
    void dfs(int x, int y) {
        if (x &lt; 0 || y &lt; 0 || x &gt;= n || y &gt;= m) return;
        if (vis[x][y] || !g[x][y]) return;
        if (x == bx &amp;&amp; y == by) return;
        vis[x][y] = true;
        dfs(x + 1, y);
        dfs(x - 1, y);
        dfs(x, y - 1);
        dfs(x, y + 1);
    }
<A NAME="0"></A>    
public:
    int minPushBox(vector&lt;vector&lt;char&gt;&gt;&amp; grid) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match24-0.html#0',2,'match24-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        n = grid.size();
        m = grid[0].size();
<A NAME="1"></A>        for (int i = 0; i &lt; n; ++i) {
            for (int j = 0; j &lt; m; ++j) {</B></FONT>
                g[i][j] = grid[i][j] != '#';
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match24-0.html#1',2,'match24-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                if (grid[i][j] == 'S') {
                    sx = i, sy = j;
                } else if (grid[i][j] == 'T') {
                    ex = i, ey = j;
                } else if (grid[i][j] == 'B') {
                    bx = i, by = j;
                }
            }
        }</B></FONT>
        using T = tuple&lt;int, int, int, int&gt;;
        map&lt;T, int&gt; dis;
        queue&lt;tuple&lt;int, int, int, int&gt;&gt; q;
        q.emplace(bx, by, sx, sy);
        dis[q.front()] = 0;
        while (q.size()) {
            tie(bx, by, sx, sy) = q.front();
            int od = dis[q.front()];
            q.pop();
            memset(vis, 0, sizeof vis);
            dfs(sx, sy);
<A NAME="2"></A>            // printf(&quot;%d %d %d %d: %d\n&quot;, bx, by, sx, sy, od);
            const int dx[] = {1, -1, 0, 0};
            const int dy[] = {0, 0, 1, -1};
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match24-0.html#2',2,'match24-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            for (int d = 0; d &lt; 4; ++ d) {
                int tx = bx + dx[d];
                int ty = by + dy[d];
                int ox = bx - dx[d];
                int oy = by - dy[d];
                if (tx &lt; 0 || ty &lt; 0 || ox &lt; 0 || oy &lt; 0) continue;</B></FONT>
                if (tx &gt;= n || ty &gt;= m || ox &gt;= n || oy &gt;= m) continue;
                if (!g[tx][ty] || !g[ox][oy]) continue;
                if (!vis[tx][ty]) continue;
                T s(ox, oy, bx, by);
                if (dis.count(s)) continue;
                dis[s] = od + 1;
                if (ox == ex &amp;&amp; oy == ey) return od + 1;
                q.emplace(s);
            }
        }
        return -1;
    }
};
</PRE>
</BODY>
</HTML>
