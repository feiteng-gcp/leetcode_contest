<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>148_xuyanzhe.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>148_xuyanzhe.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
<A NAME="0"></A>    int minPushBox(vector&lt;vector&lt;char&gt;&gt;&amp; grid) {
        int n = grid.size(), m = grid[0].size();
        int tx, ty, bx, by, sx, sy;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match9-1.html#0',3,'match9-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        int ans = INT_MAX;
        for(int i = 0; i &lt; grid.size(); i++) {
            for(int j = 0; j &lt; grid[0].size(); j++) {</B></FONT>
<A NAME="1"></A>                if(grid[i][j] == '#' || grid[i][j] == '.') {
                    continue;
                }
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match9-1.html#1',3,'match9-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>                if(grid[i][j] == 'T') {
                    tx = i;
                    ty = j;
                    grid[i][j] = '.';
                }
                if(grid[i][j] == 'B') {
                    bx = i;
                    by = j;
                    grid[i][j] = '.';
                }
                if(grid[i][j] == 'S') {
                    sx = i;
                    sy = j;
                    grid[i][j] = '.';
                }</B></FONT>
            }
        }
        
        map&lt;vector&lt;int&gt;, int&gt; st;
<A NAME="2"></A>        queue&lt;pair&lt;vector&lt;int&gt;, int&gt;&gt; qe;
        
        qe.push({{bx, by, sx, sy}, 0});
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match9-1.html#2',3,'match9-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        vector&lt;vector&lt;int&gt;&gt; dirs = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}};</B></FONT>
        
        while(!qe.empty()) {
            auto cur = qe.front();
            qe.pop();
            
            vector&lt;int&gt; state = cur.first;
            int step = cur.second;
            if(st.count(state) &gt; 0 &amp;&amp; step &gt;= st[state]) {
                continue;
            }
            
            st[state] = step;
            
            int cbx = state[0], cby = state[1], csx = state[2], csy = state[3];
            
            if(state[0] == tx &amp;&amp; state[1] == ty) {
                ans = min(ans, step);
                continue;
            }
            
            for(int i = 0; i &lt; 4; i++) {
                int nsx = csx + dirs[i][0], nsy = csy + dirs[i][1];
                if(nsx &gt;= 0 &amp;&amp; nsx &lt; n &amp;&amp; nsy &gt;= 0 &amp;&amp; nsy &lt; m &amp;&amp; grid[nsx][nsy] == '.') {
                    if(nsx == cbx &amp;&amp; nsy == cby) {
                        int nbx = cbx + dirs[i][0], nby = cby + dirs[i][1];
                        if(nbx &gt;= 0 &amp;&amp; nbx &lt; n &amp;&amp; nby &gt;= 0 &amp;&amp; nby &lt; m &amp;&amp; grid[nbx][nby] == '.') {
                            qe.push({{nbx, nby, nsx, nsy}, step + 1});
                        }
                    } else {
                        qe.push({{cbx, cby, nsx, nsy}, step});
                    }
                }
            }
        }
        
        return ans == INT_MAX ? -1 : ans;
    }
};
</PRE>
</BODY>
</HTML>
