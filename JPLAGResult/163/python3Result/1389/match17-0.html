<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>109_A_Pinterest_Employee.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>109_A_Pinterest_Employee.py</CENTER></H3><HR>
<PRE>
class Solution:
    def minPushBox(self, grid: List[List[str]]) -&gt; int:
           # Pure BFS
        m = len(grid)
        n = len(grid[0])

        def FindLoc(s, t, box):
            if s==t:
                return True
            visit = set()
            if 0 &lt;= t[0] &lt; m and 0 &lt;= t[1] &lt; n and grid[t[0]][t[1]] != '#':
                L = [s]
                visit.add(s)
                while L:
                    tmpL = []
<A NAME="0"></A>                    for x, y in L:
                        for dx, dy in [[-1, 0], [1, 0], [0, 1], [0, -1]]:
                            nx, ny = x + dx, y + dy
                            <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match17-1.html#0',3,'match17-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if 0 &lt;= nx &lt; m and 0 &lt;= ny &lt; n and grid[nx][ny] != '#' and (nx, ny) != box and (nx,ny) not in visit:
                                if (nx, ny) == t:
                                    return True
                                tmpL.append((nx, ny))
                                visit.add((nx</B></FONT>, ny))
                    L = tmpL
                return False
            return False

        def checkvalid(s):
            if 0 &lt;= s[0] &lt; m and 0 &lt;= s[1] &lt; n and grid[s[0]][s[1]] != '#':
                return True
<A NAME="1"></A>            else:
                return False

        <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match17-1.html#1',3,'match17-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>for i in range(m):
            for j in range(n):
                if grid[i][j] == 'S':
                    human = (i, j)
                elif grid[i][j] == 'B':
                    box = (i, j)
                elif grid[i][j] == 'T':
                    target = (i, </B></FONT>j)
        # print(human,box,target)
        D = set()
        LL = [(box, human)]
        D.add((box,human))
        step = 1
        while LL:
            # print('LL:',LL)
            # print('D',D)

            tmpLL = []
            for box, human in LL:
                for dx, dy in [[-1, 0], [1, 0], [0, 1], [0, -1]]:
                    nbox = (box[0] + dx, box[1] + dy)
                    nhuman = (box[0] - dx, box[1] - dy)
                    if checkvalid(nbox) and FindLoc(human, nhuman, box) and ((box,nhuman) not in D):
                        if nbox == target:
                            return step
                        tmpLL.append((nbox, box))
                        D.add((box, nhuman))
            LL = tmpLL
            step += 1
        return -1
            
        
        
        
        
        
</PRE>

</BODY>
</HTML>
