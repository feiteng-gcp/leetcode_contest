<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>29_gracious.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>29_gracious.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>
# define N 1000002
# define M 1000002
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match3-0.html#0',2,'match3-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>typedef struct{
  int u,v,w;
  int next; // 指向下一个边号
}Edge;


class Solution {
public:
    int head[N];
    Edge edge[M];
    int e_cnt=0;
    int indx=0;
    
    int root;

    int nums[N]={0};
    int lows[N]={0};
    int flag[N]={0};

    void add_edge( int u , int v, int w ){
      edge[e_cnt].u = u;
      edge[e_cnt].v = v; //v是儿子
      edge[e_cnt].w = w;
      edge[e_cnt].next = head[u];
      head[u] = e_cnt++;
    }

    
    vector&lt;vector&lt;int&gt;&gt; res;
    void dfs( int cur, int father ){
      indx++;
      nums[cur] = indx;
      lows[cur] = indx;
      int child_cnt=0;
      int nxtv;
      for ( int i=head[cur]; i&gt;=0; i = edge[i].next ){
        nxtv = edge[i].v;
        if ( nums[nxtv] == 0 ){
          // 孩子
          dfs( nxtv, cur );
          lows[cur] = min( lows[cur], lows[nxtv] );
          if (  lows[nxtv]&gt;nums[cur]  ) {
              //cout&lt;&lt;cur&lt;&lt;&quot;-&quot;&lt;&lt;nxtv&lt;&lt;endl;
            res.push_back({nxtv,cur});
          }

        }else if( nxtv!=father ) {
          // 非父节点的 祖先节点
          lows[cur] = min( lows[cur], nums[nxtv] );
        }
      }
    }

    vector&lt;vector&lt;int&gt;&gt; criticalConnections(int n, vector&lt;vector&lt;int&gt;&gt;&amp; connections) {
        for ( int i=0; i&lt;=n; ++i ) head[i]=-1;
        for ( auto e:connections ){
          //scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
          int u = e[0];
          int v = e[1];
          add_edge(u,v,1);
          add_edge(v,u,1);   
        }
        indx=0;
        for ( int i=1; i&lt;=n; ++i ){
            if ( nums[i]==0 ){
                root = i;
                dfs(i,root);
            }
        }
        return res;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
