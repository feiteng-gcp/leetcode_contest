<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>213_boris109able.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>213_boris109able.cpp</CENTER></H3><HR>
<PRE>

struct Even {
    int a, i;
    Even(int a=0, int i=0): a(a), i(i) {}
    bool operator &lt; (const Even&amp; rhs) const {
        return a &lt; rhs.a || (a == rhs.a &amp;&amp; i &lt; rhs.i);
        // if (a == rhs.a) i &lt; rhs.i;
        // return a &lt; rhs.a;
    }
};

struct Odd {
    int a, i;
    Odd(int a=0, int i=0): a(a), i(i) {}
    bool operator &lt; (const Odd&amp; rhs) const {
        // if (a == rhs.a) i &lt; rhs.i;
        // return a &gt; rhs.a;
        return a &gt; rhs.a || (a == rhs.a &amp;&amp; i &lt; rhs.i);
    }
};

set&lt;Even&gt; even;
set&lt;Odd&gt; odd;

const int maxn = 20000 + 10;
int dp[maxn][2];

class Solution {
public:
    int oddEvenJumps(vector&lt;int&gt;&amp; A) {
<A NAME="0"></A>        even.clear();
        odd.clear();
        
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match4-0.html#0',2,'match4-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        int n = A.size();
        dp[n - 1][0] = dp[n - 1][1] = 1;
        int ans = 1;
        even.insert(Even(A[n - 1], n - 1));
        odd.insert(Odd(A[n - 1], n - 1));
        for (int i = n - 2; i &gt;= 0; i--) {
            // printf(&quot;i: %d\n&quot;, i);
            dp[i][0] = dp[i][1] = 0;</B></FONT>
            set&lt;Even&gt;::iterator it = even.lower_bound(Even(A[i], i));
            if (it != even.end() &amp;&amp; dp[it-&gt;i][1]) {
                dp[i][0] = 1; ans++;
                // printf(&quot;even: %d %d\n&quot;, it-&gt;a, it-&gt;i);
            }
            
            set&lt;Odd&gt;::iterator it2 = odd.lower_bound(Odd(A[i], i));
            if (it2 != odd.end() &amp;&amp; dp[it2-&gt;i][0]) {
                dp[i][1] = 1;
                // printf(&quot;odd: %d %d\n&quot;, it-&gt;a, it-&gt;i);
            }
            
  
            // printf(&quot;%d\n&quot;, even.count(Even(A[i], i)));
            
            even.insert(Even(A[i], i));
            odd.insert(Odd(A[i], i));
            
            
            
//             for (Odd o: odd) {
//                 printf(&quot;%d %d\n&quot;, o.a, o.i);
//             }
//             printf(&quot;--------------\n&quot;);

//             for (Even o: even) {
//                 printf(&quot;%d %d\n&quot;, o.a, o.i);
//             }
//              printf(&quot;-----------------------------------------------\n&quot;);
        }
        
        return ans;
    }
};
</PRE>
</BODY>
</HTML>
