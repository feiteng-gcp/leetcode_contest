<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>471_oduesp.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>471_oduesp.cpp</CENTER></H3><HR>
<PRE>
#define P pair&lt;int,int&gt;
class Solution {
public:
    int n, m;
    vector&lt;vector&lt;bool&gt;&gt; vis;
    bool ok(int x, int y) {
        if(x &lt; 0 || x &gt;= n || y &lt; 0 || y &gt;= m || vis[x][y]) {
            return false;
        }
        return true;
    }
    vector&lt;vector&lt;int&gt;&gt; grid;
    bool bfs() {

        
        queue&lt;P&gt; q;
        vis[0][0] = true;
        
        q.push({0, 0});
        
        while(!q.empty()) {
            P top = q.front();
            q.pop();
            int x = top.first, y = top.second;
            if(x == n - 1 &amp;&amp; y == m - 1) {
                return true;
            }
<A NAME="0"></A>            
            int now = grid[x][y];
            if(now == 1) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#0',2,'match6-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x, ny = y + 1;
                //由
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 3 || grid[nx][ny] == 5 || grid[nx][ny] == 1)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //左
                nx = x, ny = y - 1;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 6 || grid[nx][ny] == 4 || grid[nx][ny] == 1) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
<A NAME="1"></A>                }
            }</B></FONT>
            else if(now == 2) {
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#1',2,'match6-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x + 1, ny = y;
                //向下走
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 5 || grid[nx][ny] == 6)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //上
                nx = x - 1, ny = y;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 3 || grid[nx][ny] == 4) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
<A NAME="2"></A>                
            }else if(now == 3) {</B></FONT>
                //左
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#2',2,'match6-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x, ny = y - 1;

                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 1 || grid[nx][ny] == 4 || grid[nx][ny] == 6)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //下
                nx = x + 1, ny = y;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 5 || grid[nx][ny] == 6) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
<A NAME="3"></A>                }

            }else if(now == 4) {</B></FONT>
<FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#3',2,'match6-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x, ny = y + 1;
                //右边
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 3 || grid[nx][ny] == 5 || grid[nx][ny] == 1)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //下边
                nx = x + 1, ny = y;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 5 || grid[nx][ny] == 6) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
<A NAME="4"></A>                }

            }else if(now == 5) {</B></FONT>
<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#4',2,'match6-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x - 1, ny = y;
                //上
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 3 || grid[nx][ny] == 4)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //左
                nx = x, ny = y - 1;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 1 || grid[nx][ny] == 4 || grid[nx][ny] == 6) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
<A NAME="5"></A>
                
            }else {</B></FONT>
<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6-0.html#5',2,'match6-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                int nx = x, ny = y + 1;
                //右
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 3 || grid[nx][ny] == 5 || grid[nx][ny] == 1)) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }
                //上
                nx = x - 1, ny = y;
                if(ok(nx, ny) &amp;&amp; (grid[nx][ny] == 2 || grid[nx][ny] == 3 || grid[nx][ny] == 4) ) {
                    vis[nx][ny] = true;
                    q.push({nx, ny});
                }

            }            
        }
        return false;

    }
    bool hasValidPath(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {</B></FONT>
        this-&gt;grid = grid;
        n = grid.size(), m = grid[0].size();
        vis.resize(n + 1, vector&lt;bool&gt;(m + 1));
        return bfs();
    }
};
</PRE>
</BODY>
</HTML>
