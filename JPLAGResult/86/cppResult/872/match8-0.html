<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>4_tfliao.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>4_tfliao.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
	int to_int(const string&amp; s) {
		if (s[0] == '0' &amp;&amp; s.length() &gt; 1) return false;
		if (s.length() &gt; 10) return false;
		long long t = 0;
		for (int i=0;i&lt;s.length();++i) {
			t = t*10 + s[i]-'0';
		}
		if (t &gt;= (1LL&lt;&lt;31)) return false;
		return (int)t;
	}
	int digits(int x) {
		int cnt = 1;
		while(x &gt;= 10) {
			++cnt;
			x/=10;
		}
		return cnt;
	}
	
	
	bool verify(int f1, int f2, int off, string&amp; S, vector&lt;int&gt;&amp; res) {
		res.clear();
		res.push_back(f1);
		res.push_back(f2);
		
		while(off &lt; S.length()) {
<A NAME="0"></A>			int f = f1+f2;
			int d = digits(f);
			if (off+d &gt; S.length()) return false;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match8-1.html#0',3,'match8-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>			int t = to_int(S.substr(off, d));
			if (t != f) return false;
			f1 = f2;
			f2 = f;
			res.push_back(f);
			off += d;
		}
		return res.size() &gt; 2;
	}

    vector&lt;int&gt; splitIntoFibonacci(string S) {
		vector&lt;int&gt; ans;</B></FONT>
		int l = S.length();
        for(int i=1;i&lt;11;++i) {
			if (i &gt; l) continue;
			int f1 = to_int(S.substr(0,i));
			if (f1 == -1) continue;

			for (int j=1;j&lt;11;++j) {
				if (i+j &gt; l) continue;
				int f2 = to_int(S.substr(i,j));
				if (f2 == -1) continue;
				
				if (verify(f1, f2, i+j, S, ans)) {
					return ans;
				}
			}
		}
		return vector&lt;int&gt;();
    }
};
</PRE>
</BODY>
</HTML>
