<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>91_merryl.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>91_merryl.java</CENTER></H3><HR>
<PRE>
import java.math.*;
class Solution {
    public List&lt;Integer&gt; splitIntoFibonacci(String S) {
        if (S == null || S.length() == 0) {
            return new ArrayList&lt;Integer&gt;();
        }
        int len = S.length();
        
        // [0, x1)
        // [x1 x2)
        List&lt;Integer&gt; ret = new ArrayList&lt;&gt;();
<A NAME="0"></A>        BigInteger ret1, ret2;
        
        for (int x1 = 1; x1 &lt; len - 1; x1++) {
            for (int x2 = x1 + 1; x2 &lt; len; x2++) <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match16-1.html#0',3,'match16-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
                
                String s1 = S.substring(0, x1);
                if (s1.charAt(0) == '0' &amp;&amp; (!s1.equals(&quot;0&quot;))) {
                    continue;
                }
                String s2 = S.substring(x1, x2);
                if (s2.charAt(0) == '0' &amp;&amp; !(s2.equals(&quot;0&quot;))) {
                    continue;
                }</B></FONT>
                
                if (s1.length() &gt; 10 || s2.length() &gt; 10) {
                    continue;
                }
                if (Long.valueOf(s1) &gt; Integer.MAX_VALUE || Long.valueOf(s2) &gt; Integer.MAX_VALUE) {
                    continue;
                }
                
                BigInteger a1 = new BigInteger(s1);
                BigInteger a2 = new BigInteger(s2);
                
                ret.add(Integer.valueOf(s1));
                ret.add(Integer.valueOf(s2));
                
                int xend = x2; // [0, x2) x2 is ok;
                boolean flag = true;
                while (xend &lt; len) {
                    String next = a1.add(a2).toString();
                    if (next.length() &gt; 10 || Long.valueOf(next) &gt; Integer.MAX_VALUE) {
                        flag = false;
                        break;
                    }
                    if (next.length() + xend &gt; len || !(S.substring(xend, next.length() + xend).equals(next))) {
                        flag = false;
                        break;
                    }
                    a1 = a2;
                    a2 = new BigInteger(next);
                    xend += next.length();
                    ret.add(Integer.valueOf(next));
<A NAME="1"></A>                } 
                if (!flag) {
                    ret.clear();
                } else <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match16-1.html#1',3,'match16-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
                    return ret;
                }
                
            }
        }
        
        return</B></FONT> ret;
        
    }
}
</PRE>

</BODY>
</HTML>
