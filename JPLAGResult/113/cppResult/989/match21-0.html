<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>56_Moonpuck.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>56_Moonpuck.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
  int gcd(int a, int b) {
    return b == 0 ? a : gcd(b, a % b);
<A NAME="0"></A>  }
  
  int fa[100005];
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>  int find(int x) { return x == fa[x] ? x : fa[x] = find(fa[x]); }
  
  vector&lt;int&gt; divide(int x) {
    vector&lt;int&gt; ans;
    for (int i = 2; i * i &lt;= x; ++i) {
      if (x % i == 0) {</B></FONT>
        ans.push_back(i);
        if (x / i != i) ans.push_back(x / i);
      }
    }
    return ans;
  }
  
<A NAME="1"></A>  int largestComponentSize(vector&lt;int&gt;&amp; A) {
    int dp[100005], cnt[100005];
    memset(dp, 0, sizeof(dp));
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match21-1.html#1',3,'match21-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>    memset(cnt, 0, sizeof(cnt));
    for (int i = 0; i &lt; A.size(); ++i) {
      cnt[A[i]]++;
    }
    for (int i = 1; i &lt;= 100004; ++i) fa[i] = i;</B></FONT>
    sort(A.begin(), A.end());
    vector&lt;int&gt;::iterator new_end;
    new_end = unique(A.begin(), A.end());
    A.erase(new_end, A.end());
    // for (int i = 0; i &lt; A.size(); ++i) cout &lt;&lt; A[i] &lt;&lt; endl;
    int ans = 1;
    for (int i = 0; i &lt; A.size(); ++i) {
      vector&lt;int&gt; facts = divide(A[i]);
      for (int j = 0; j &lt; facts.size(); ++j) {
        int x = find(A[i]);
        int y = find(facts[j]);
        if (x != y) {
          fa[y] = x;
          ans = max(ans, cnt[y] + cnt[x]);
          cnt[x] += cnt[y];
        }
      }
    }
    return ans;
  }
};
</PRE>
</BODY>
</HTML>
