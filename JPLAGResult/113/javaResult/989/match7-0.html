<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>131_leonxpray.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>131_leonxpray.java</CENTER></H3><HR>
<PRE>
class Solution {
    static List&lt;Integer&gt; pList = new ArrayList&lt;&gt;(200);

	static {
		pList.add(2);
		for (int i = 3; i &lt;= 50000; i += 2) {
			boolean find = true;
			for (int j = 2; j * j &lt;= i; j++) {
				if ((i % j) == 0) {
					find = false;
					break;
				}
			}
			if (find) {
				pList.add(i);
			}
		}

	}


	Map&lt;Integer, Integer&gt; f;

	int find(int x) {
		int fx = f.get(x);
		if (x != fx) {
			int ff = find(fx);
<A NAME="0"></A>			f.put(fx, ff);
			fx = ff;
		}
		return fx;<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match7-1.html#0',3,'match7-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
	}

	void union(int x, int y) {
		int fx = find(x);
		int fy = find(y);
		if (fx != fy) {</B></FONT>
			f.put(fx, fy);
		}
	}

	public int largestComponentSize(int[] A) {

		f = new HashMap&lt;&gt;();

		Set&lt;Integer&gt; set = new HashSet&lt;&gt;();
		for (int i = 0; i &lt; A.length; i++) {
			f.put(A[i], A[i]);
			set.add(A[i]);
		}


		for (int i = 0; i &lt; pList.size(); i++) {
			boolean found = false;
			int prev = 0;
			if (pList.get(i) &lt; 200) {
				for (int j = A.length - 1; j &gt;= 0; j--) {
					if (A[j] % pList.get(i) == 0) {
						if (!found) {
							found = true;
							prev = A[j];
						} else {
							union(A[j], prev);
							prev = A[j];
						}
					}
				}
			} else {

				int lastIndex = -1;
				int p = 1;

				while(pList.get(i) * p &lt;= 100000) {
					if (set.contains(pList.get(i) * p)) {
						if (lastIndex == -1) {
							lastIndex = p;
						} else {
							union(pList.get(i) * p, pList.get(i) * lastIndex);
							lastIndex = p;
						}
					}
					p++;
				}

			}
		}

		Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();
		for (Map.Entry&lt;Integer, Integer&gt; entry : f.entrySet()) {
			int x = entry.getKey();
			int fx = find(x);
			int curr = map.getOrDefault(fx, 0);
			map.put(fx, curr + 1);
		}

		int max = -1;

		for (Integer x : map.values()) {
			max = Math.max(max, x);
		}

		return max;

	}
}
</PRE>

</BODY>
</HTML>
