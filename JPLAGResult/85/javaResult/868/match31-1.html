<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>446_kumarjiviyahoo.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>446_kumarjiviyahoo.java</CENTER></H3><HR>
<PRE>
class Solution {
    StringBuilder sb = null;
    public String pushDominoes(String dominoes) {
        sb = new StringBuilder(dominoes);
        helper(sb, 0);
        return sb.toString();
    }
    
    public void helper(StringBuilder str, int startIndex) {
        if(startIndex &gt;= str.length()) return;
        
        int firstIndex = getFirstIndexNonDot(str, startIndex);
        if(firstIndex == -1) return;
        char ch = str.charAt(firstIndex);
        if(ch == 'L') {
            makeItLOrR(str, startIndex, firstIndex, 'L');
            helper(str, firstIndex+1);
        } else {//char is 'R'
            //find the next non-dot char.
            int nextIndex = getFirstIndexNonDot(str, firstIndex+1);
            if(nextIndex == -1) {
            	makeItLOrR(str, firstIndex+1, str.length()-1, 'R');
            	return;
            }
            if(str.charAt(nextIndex) == 'L') {
                //drop one by one.
                int r = firstIndex;
                int l = nextIndex;
                while(r &lt; l) {
                    str.setCharAt(r, 'R');;
                    str.setCharAt(l,'L');
<A NAME="0"></A>                    r++;
                    l--;
                }
                <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#0',2,'match31-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>helper(str, nextIndex+1);
                
            } else {//next char is 'R'
                //change everything from firstIndex to nextIndex by 'R'
                makeItLOrR(str, firstIndex, nextIndex, 'R');
                helper(str, nextIndex);
            }
        }
    }</B></FONT>
    
    public int getFirstIndexNonDot(StringBuilder str, int i) {
        for(int j = i; j&lt; str.length(); j++) {
            if(str.charAt(j) == 'L' || str.charAt(j) == 'R') {
                return j;
            }
        }
<A NAME="1"></A>        return -1;
    }
    
    public void makeItLOrR(StringBuilder sb, <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#1',2,'match31-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int startIndex, int endIndex, char ch) {
        for(int i=startIndex; i&lt;=endIndex; i++) {
            sb.setCharAt(i, ch);
        }
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
