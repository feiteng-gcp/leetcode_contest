<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>473_justdomore.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>473_justdomore.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class Solution {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match14-0.html#0',2,'match14-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    vector&lt;pair&lt;int, int&gt;&gt; dirs = {{-1,0},{0,1},{1,0},{0,-1}};</B></FONT>
public:
    void addNeighbors(int i, int j, vector&lt;vector&lt;int&gt;&gt;&amp; grid, 
                      vector&lt;vector&lt;bool&gt;&gt;&amp; visited, queue&lt;pair&lt;int,int&gt;&gt;&amp; q) {
        for (auto dir: dirs) {
            int x = i + dir.first;
            int y = j + dir.second;
            if (x &lt; grid.size() &amp;&amp; y &lt; grid[0].size() &amp;&amp; x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; visited[x][y] == false &amp;&amp; grid[x][y] == 1) {
                visited[x][y] = true;
                q.push(make_pair(x, y));
                //grid[x]
<A NAME="1"></A>            }
        }        
    }
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match14-0.html#1',2,'match14-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    int orangesRotting(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {
        /*
        1. Go through the matrix and add all the rotten oranges
        2. At the same time count the number of fresh oranges
        3. Go through all the rotten tomatoes and add their neighbors
           to a queue
        4. Mark them as rotten as add their neighbors
        5. return count if all are rotten else return -1
        */
        vector&lt;vector&lt;bool&gt;&gt; visited(grid.size(), vector&lt;bool&gt;(grid[0].size(), false));
        queue&lt;pair&lt;int,int&gt;&gt; q;
        int fresh = 0;
        for (int i = 0; i &lt; grid.size(); i++) {
            for (int j = 0; j &lt; grid[i].size(); j++) {
                if (grid[i][j] == 1) {
                    fresh++;
                } else if (grid[i][j] == 2) {
                    addNeighbors(i, j, grid, visited, q);
                }
            }
        }
        
        int res = 0;
        while (!q.empty()) {</B></FONT>
            ++res;
            int sz = q.size();
            fresh -= sz;
            while (sz--) {
                auto p = q.front();
                q.pop();
                addNeighbors(p.first, p.second, grid, visited, q);
            }
        }
        return fresh == 0 ? res : -1;
    }
};
</PRE>
</BODY>
</HTML>
