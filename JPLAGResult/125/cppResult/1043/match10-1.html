<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>252_andrewkaploun0.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>252_andrewkaploun0.cpp</CENTER></H3><HR>
<PRE>
#define DEBUG

#ifdef DEBUG
#define mem cout&lt;&lt;&quot;meme\n&quot;;
#define p1(a) cout&lt;&lt;#a&lt;&lt;&quot;= &quot;&lt;&lt;a&lt;&lt;&quot;\n&quot;
#define p2(a, b) cout&lt;&lt;#a&lt;&lt;&quot;= &quot;&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;#b&lt;&lt;&quot;= &quot;&lt;&lt;b&lt;&lt;&quot;\n&quot;
#define p3(a, b, c) cout&lt;&lt;#a&lt;&lt;&quot;= &quot;&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;#b&lt;&lt;&quot;= &quot;&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;#c&lt;&lt;&quot;= &quot;&lt;&lt;c&lt;&lt;&quot;\n&quot;
#define p4(a, b, c, d) cout&lt;&lt;#a&lt;&lt;&quot;= &quot;&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;#b&lt;&lt;&quot;= &quot;&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;#c&lt;&lt;&quot;= &quot;&lt;&lt;c&lt;&lt;&quot; &quot;&lt;&lt;#d&lt;&lt;&quot;= &quot;&lt;&lt;d&lt;&lt;&quot;\n&quot;
#define p5(a, b, c, d, e) cout&lt;&lt;#a&lt;&lt;&quot;= &quot;&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;#b&lt;&lt;&quot;= &quot;&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;#c&lt;&lt;&quot;= &quot;&lt;&lt;c&lt;&lt;&quot; &quot;&lt;&lt;#d&lt;&lt;&quot;= &quot;&lt;&lt;d&lt;&lt;&quot; &quot;&lt;&lt;#e&lt;&lt;&quot;= &quot;&lt;&lt;e&lt;&lt;&quot;\n&quot;
#define pa(arr); for(int i = 0; i &lt; arr.size(); i++) cout&lt;&lt; arr[i]; cout&lt;&lt;&quot;\n&quot;;
#define pA(arr); for(int i = 0; i &lt; arr.size(); i++) {for(int j = 0; j &lt; arr[i].size(); j++)cout&lt;&lt;arr[i][j]; cout&lt;&lt;&quot;\n&quot;;}
#else
#define mem
#define p1(a) 
#define p2(a, b)
#define p3(a, b, c) 
#define p4(a, b, c, d) 
#define p5(a, b, c, d, e) 
#define pa(arr);
#define pA(arr);
#endif

<A NAME="1"></A>class Solution {
public:
    vector&lt;int&gt; gridIllumination(int N, vector&lt;vector&lt;int&gt;&gt;&amp; lamps, vector&lt;vector&lt;int&gt;&gt;&amp; queries) {
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match10-0.html#1',2,'match10-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        vector&lt;vector&lt;int&gt;&gt; dir = {{1,0}, {0,1}, {-1,0}, {0,-1}, {-1, -1}, {-1,1}, {1,-1}, {1, 1}};</B></FONT>
<A NAME="0"></A>        map&lt;int, int&gt; columns;
        map&lt;int, int&gt; rows;
        map&lt;int, int&gt; diag1;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match10-0.html#0',2,'match10-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        map&lt;int, int&gt; diag2;
        set&lt;pair&lt;int, int&gt;&gt; lmps;
        vector&lt;int&gt; res;
        for(auto l : lamps){
            lmps.insert(make_pair(l[0], l[1]));
            columns[l[1]]++;
            rows[l[0]]++;
            diag1[l[0]-l[1]]++;
            diag2[l[0]+l[1]]++;
        }</B></FONT>
        for(auto q : queries){
            // p2(q[0], q[1]);
            // p4(columns[q[1]], rows[q[1]],  diag1[q[0] - q[1]], diag2[q[1] + q[0]]);
            // cout &lt;&lt; endl;
            if(columns[q[1]] &gt; 0 || rows[q[0]] &gt; 0 || diag1[q[0] - q[1]] &gt; 0 || diag2[q[1] + q[0]] &gt; 0 ){
                res.push_back(1);
                
            }
            else{
<A NAME="2"></A>                res.push_back(0);
            }
            for(auto d : dir){
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match10-0.html#2',2,'match10-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                if(lmps.count(make_pair(q[0] + d[0], q[1] + d[1]))){
                    lmps.erase(make_pair(q[0] + d[0], q[1] + d[1]));
                    columns[q[1]+d[1]]--;
                    rows[q[0]+d[0]]--;
                    diag1[q[0]+d[0]-q[1]-d[1]]--;
                    diag2[q[0]+d[0]+q[1]+d[1]]--;
                }
            }
        }
        return res;
        
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
