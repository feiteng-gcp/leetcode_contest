<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>53_Aging.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>53_Aging.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class Solution {
public:
    vector&lt;int&gt; gridIllumination(int N, vector&lt;vector&lt;int&gt;&gt;&amp; lamps, vector&lt;vector&lt;int&gt;&gt;&amp; queries) {
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match18-1.html#0',3,'match18-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        map&lt;int, int&gt; cols, rows, diags, odiags;
        set&lt;pair&lt;int, int&gt;&gt; lamp;
        
        for (auto &amp;q: queries) {
            cols[q[0]] = 0;
            rows[q[1]] = 0;
            diags[q[1] - q[0]] = 0;
            odiags[q[1] + q[0]] = 0;
        }
        
        for (auto &amp;l: lamps) {</B></FONT>
            auto it1 = cols.find(l[0]);
            if (it1 != cols.end()) it1-&gt;second++;
            auto it2 = rows.find(l[1]);
            if (it2 != rows.end()) it2-&gt;second++;
            auto it3 = diags.find(l[1] - l[0]);
            if (it3 != diags.end()) it3-&gt;second++;
            auto it4 = odiags.find(l[1] + l[0]);
            if (it4 != odiags.end()) it4-&gt;second++;
            lamp.insert(make_pair(l[0], l[1]));
<A NAME="1"></A>        }
        
        vector&lt;int&gt; ans;
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match18-1.html#1',3,'match18-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        vector&lt;pair&lt;int, int&gt;&gt; move = {{-1, -1}, {-1, 0}, {-1, 1}, {0, -1}, {0, 1}, {1, -1}, {1, 0}, {1, 1}};</B></FONT>
        for (auto &amp;q: queries) {
            if (cols[q[0]] + rows[q[1]] + diags[q[1] - q[0]] + odiags[q[1] + q[0]] &gt; 0) ans.push_back(1);
            else ans.push_back(0);
            
            for (auto &amp;m: move) {
<A NAME="2"></A>                int x = q[0] + m.first;
                int y = q[1] + m.second;
                if (x &lt; 0 || x &gt;= N || y &lt; 0 || y &gt;= N) continue;
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match18-1.html#2',3,'match18-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>                if (lamp.find(make_pair(x, y)) != lamp.end()) {
                    cols[x]--;
                    rows[y]--;
                    diags[y - x]--;
                    odiags[y + x]--;
                    lamp.erase(make_pair(x, y));
                }
            }
        }
        
        return ans;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
