<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>369_vg1691.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>369_vg1691.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>class Solution {
    public int[] gridIllumination(int N, int[][] lamps, int[][] queries) {
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match5-1.html#0',3,'match5-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Map&lt;Integer, Integer&gt; row = new HashMap();
        Map&lt;Integer, Integer&gt; column = new HashMap();
        Map&lt;String, Integer&gt; d1 = new HashMap();
        Map&lt;String, Integer&gt; d2 = new HashMap();
        Set&lt;String&gt; lcoor = new HashSet();
        for(int[] l: lamps){
            row.put(l[0], row.getOrDefault(l[0], 0)+1);
            column.put(l[1], column.getOrDefault</B></FONT>(l[1], 0)+1);
            String d = findD1(l);
            d1.put(d, d1.getOrDefault(d, 0)+1);
            d = findD2(l, N);
            d2.put(d, d2.getOrDefault(d, 0)+1);
<A NAME="1"></A>            lcoor.add(l[0]+&quot;,&quot;+l[1]);
        }
        int[] res = new int[queries.length];
        <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match5-1.html#1',3,'match5-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int[][] dirs = new int[][]{{1,1}, {1,0}, {1,-1}, {0,-1}, {-1,-1},{-1,0}, {-1,1},{0,1}</B></FONT>};
        for(int i=0; i&lt;queries.length; i++){
            int[] q = queries[i];
            if(row.getOrDefault(q[0], 0)&gt;0 || column.getOrDefault(q[1],0) &gt; 0) res[i] = 1;
            else {
                String d = findD1(q);
<A NAME="2"></A>                String dz = findD2(q, N);
                if(d1.getOrDefault(d, 0) &gt; 0 || d2.getOrDefault(dz, 0) &gt; 0) res[i] = 1;
                else res[i] = 0;
            <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match5-1.html#2',3,'match5-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
            for(int[] dir:dirs){
                int x = dir[0]+q[0];
                int y = dir[1]+q[1];
                if(x &gt;=0 &amp;&amp; x &lt;N-1 &amp;&amp; y&gt;=0 &amp;&amp; y&lt;N-1 &amp;&amp; lcoor.contains(x+&quot;,&quot;+y)){
                    row.put(x, row.get(x)-1);
                    column.put(y, column.get</B></FONT>(y)-1);
<A NAME="3"></A>                    String d = findD1(new int[]{x,y});
                    d1.put(d, d1.get(d)-1);
                    d = findD2(new int[]{x,y}, N);
                    <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match5-1.html#3',3,'match5-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>d2.put(d, d2.get(d)-1);
                    lcoor.remove(x+&quot;,&quot;+y);
                }
            }
        }
        return res;
    }</B></FONT>
    public String findD1(int[] q){
        int x = Math.max(0, q[0]-q[1]);
        int y = Math.max(0, q[1]-q[0]);
        return x+&quot;,&quot;+y;
    }
    public String findD2(int[] l, int N){
        int x = 0, y=0;
        if(l[1]+l[0] &gt; N-1){
            x = N-1;
            y = l[0]+l[1]+1-N;
        } else{
            x = l[1]+l[0];
            y = 0;
        }
        return x+&quot;,&quot;+y;
    }
}


            // int x = Math.max(0, l[0]-l[1]);
            // int y = Math.max(0, l[1]-l[0]);

            // if(l[1]+l[0] &gt; N-1){
            //     x = N-1;
            //     y = l[0]+l[1]+1-N;
            // } else{
            //     x = l[1]+l[0];
            //     y = 0;
            // }
</PRE>

</BODY>
</HTML>
