<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>17_abcdefat.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>17_abcdefat.java</CENTER></H3><HR>
<PRE>
class Solution {
    public int movesToChessboard(int[][] board) {
        // the pattern should be either inverse or the same
        // kind like reorder 11111111000000000
        int n = board.length;
        // find pattern
        StringBuilder sb1 = new StringBuilder();
        StringBuilder sb2 = new StringBuilder();
        int[] cols = new int[n];
        int diff2 = 0;
        
        for (int i = 0 ; i &lt; n; ++i) {
            
            int tmp1 = board[0][i];
            cols[i] = tmp1;
            
            if (tmp1 == 1) ++diff2;
            else --diff2;
            
            int tmp2 = 1 - tmp1;
            
            char ch1 = (char)(tmp1 + '0');
            char ch2 = (char)(tmp2 + '0');
            
            sb1.append(ch1);
            sb2.append(ch2);
            
        }
        
        if (diff2 &gt; 1 || diff2 &lt; -1) return -1;
        
        String ptn = sb1.toString();
        String iptn = sb2.toString();
        
        // first sort rows
        int[] rows = new int[n];
        
        for (int i = 0; i &lt; n; ++i) {
            
            StringBuilder sb = new StringBuilder();
        
            for (int j = 0 ; j &lt; n; ++j) {
                
                int tmp = board[i][j];
                char ch = (char)(tmp + '0');
                sb.append(ch);
            
            }
            
            String cur = sb.toString();
            if (cur.equals(ptn)) rows[i] = 1;
            else if (cur.equals(iptn)) rows[i] = 0;
            else return -1;             
            
        }
        
        //get the difference between 1 and 0
        int diff = 0;
        for (int tmp: rows) {
            
            if (tmp == 1) ++diff;
            else --diff;
            
        }
        
        if (diff &gt; 1 || diff &lt; -1) return -1;
        
        int res = helper(rows);
<A NAME="0"></A>        
        res += helper(cols);
        
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>return res;
        
        
    }
    
  
    
    private int helper(int[] arr) {
        // return the number of steps to reorder the array
        // the arr is of 1 and 0
        // 110 should return 1
        // if 11010100? also return 1
        // two possibilities: put 1 at either even or odd
        // 100? should return 1
        
        int n = arr.length;
        int res1 = 0; // 1 in even place
        int res2 = 0</B></FONT>; // 1 in odd place
        int count = 0;
        
        for (int i = 0; i &lt; n; ++i) {
            
            if (arr[i] == 1) {
                
                if (i%2 == 0) res1 += 1;
                else res2 += 1;
                ++count;
                
            }
            
<A NAME="1"></A>        }
        
        if (n%2 == 0) return Math.min(res1, res2);
        else <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#1',2,'match0-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
            
            if (count &gt; n/2) {
                
                // 1 should be in even place
                return res2;
                
            }
            else {
                
                // 1 should be in odd place
                return res1;
                
            }
            
        }
        
    }</B></FONT>
}
</PRE>

</BODY>
</HTML>
