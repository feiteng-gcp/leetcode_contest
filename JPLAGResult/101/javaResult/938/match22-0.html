<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>392_shtsai7.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>392_shtsai7.java</CENTER></H3><HR>
<PRE>
class Solution {
    int count;
    TreeMap&lt;Integer, Integer&gt; map;
    public int atMostNGivenDigitSet(String[] D, int N) {
        map = new TreeMap&lt;&gt;();
        for (int i = 0; i &lt; D.length; i++) {
            map.put(Integer.parseInt(D[i]), i);
        }
        int digits = 0;
        int n = N;
        while (n &gt; 0) {
            n /= 10;
            digits++;
        }
        count = 0;
<A NAME="0"></A>        // count for numbers of (digits - 1) digits
        for (int i = 1; i &lt; digits; i++) {
            count += (int) Math.pow(D.length, i);
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match22-1.html#0',3,'match22-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
        search(N, D);
        return count;
    }
    
    private void search(int limit, String[] D</B></FONT>) {
        String n = Integer.toString(limit);
        while (n.length() != 0) {
            int i = n.charAt(0) - '0';
            Integer key = map.lowerKey(i);
            if (key != null) {
                count += (map.get(key) + 1) * (int) Math.pow(D.length, n.length() - 1);
            }
            if (map.containsKey(i)) {
                n = n.substring(1);
            } else {
                return;
            }
        }
        count++;
    }
}


/*
class Solution {
    int count;
    public int atMostNGivenDigitSet(String[] D, int N) {
        int digits = 0;
        int n = N;
        while (n &gt; 0) {
            n /= 10;
            digits++;
        }
        count = 0;
        // count for numbers of (digits - 1) digits
        for (int i = 1; i &lt; digits; i++) {
            count += (int) Math.pow(D.length, i);
        }
        search(D, 0, 0, digits, N);
        return count;
    }
    
    private void search(String[] D, long value, int length, int digits, int limit) {
        if (length == digits) {
            count++;
            return;
        }
        for (int i = 0; i &lt; D.length; i++) {
            if (value * 10 + Integer.parseInt(D[i]) &lt;= limit) {
                search(D, value * 10 + Integer.parseInt(D[i]), length + 1, digits, limit);
            } else {
                break;
            }
        }
    }
}
 */
</PRE>

</BODY>
</HTML>
