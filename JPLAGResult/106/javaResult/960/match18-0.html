<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>48_megaspazz.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>48_megaspazz.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match18-1.html#0',3,'match18-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
    public int minMalwareSpread(int[][] graph, int[] initial) {
        final int N = graph.length;
        int[] size = new int[N];
        Arrays.fill(size, 1);
        DisjointSet djs = new DisjointSet(N)</B></FONT>;
        for (int i = 0; i &lt; N; ++i) {
            for (int j = i + 1; j &lt; N; ++j) {
                if (graph[i][j] == 0) {
                    continue;
                }
                int a = djs.find(i);
                int b = djs.find(j);
                if (a != b) {
<A NAME="1"></A>                    djs.union(i, j);
                    int c = djs.find(i);
                    size[c] = size[a] + size[b];
                <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match18-1.html#1',3,'match18-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
            }
<A NAME="2"></A>        }
        int[] freq = new int[N];
        for (int v : initial) {</B></FONT>
            int a = <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match18-1.html#2',3,'match18-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>djs.find(v);
            ++freq[a];
        }
        int most = -1;
        int best = -1;
        // for (int i = 0; i &lt; N; ++i) {
        //     int a = djs.find(i);
        //     System.out.format(&quot;i = %d, find = %d, size = %d, freq = %d\n&quot;, i, a, size[a], freq[a]);
        // }
        for (int v : initial) {
            int a = djs.find</B></FONT>(v);
            int save = 0;
<A NAME="3"></A>            if (freq[a] == 1) {
                save = size[a];
            }
            <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match18-1.html#3',3,'match18-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if (save &gt; most || (save == most &amp;&amp; v &lt; best)) {
                most = save;
                best = v;
            }
        }
        return +best;
    }</B></FONT>
    
	public static class DisjointSet {
		private int[] rank;
		private int[] parent;

		public DisjointSet(int n) {
			this.rank = new int[n];
			this.parent = new int[n];

			for (int i = 0; i &lt; n; ++i) {
				parent[i] = i;
			}
		}

		public int find(int x) {
			if (parent[x] != x) {
				parent[x] = find(parent[x]);
			}
<A NAME="4"></A>			return parent[x];
		}

		public boolean union(int x, int y) <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match18-1.html#4',3,'match18-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
			int xr = find(x);
			int yr = find(y);

			if (xr == yr) {</B></FONT>
				return false;
			}

			if (rank[xr] &lt; rank[yr]) {
				parent[xr] = yr;
			} else if (rank[xr] &gt; rank[yr]) {
				parent[yr] = xr;
			} else {
				parent[xr] = yr;
				++rank[yr];
			}
			return true;
		}
	}
}
</PRE>

</BODY>
</HTML>
