<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>440_zhengkai2001.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>440_zhengkai2001.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
<A NAME="0"></A>	int minMalwareSpread(vector&lt;vector&lt;int&gt;&gt;&amp; graph, vector&lt;int&gt;&amp; initial) {
		int num_nodes = graph.size();
		vector&lt;vector&lt;int&gt;&gt; neighbors(num_nodes);
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match29-0.html#0',2,'match29-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>		for (int i = 0; i &lt; num_nodes; i++) {
			for (int j = 0; j &lt; num_nodes; j++) {
				if (graph[i][j] == 1 &amp;&amp; i != j) {</B></FONT>
					neighbors[i].emplace_back(j);
				}
			}
		}

<A NAME="1"></A>		set&lt;int&gt; initials;
		for (int i : initial) {
			initials.emplace(i);
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match29-0.html#1',2,'match29-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>		}

		int max_size_subgraph = 0;
		int min_initial = -1;
		vector&lt;bool&gt; visited(num_nodes, false);
		for (int i = 0; i &lt; num_nodes; i++) {
			if (!visited[i]) {</B></FONT>
				int size_subgraph = 0;
				set&lt;int&gt; initials_in_subgraph;
				bfs(size_subgraph, initials_in_subgraph, neighbors, initials, visited, i);
				if (initials_in_subgraph.size() == 1) {
					int the_only_initial = *initials_in_subgraph.begin();
					if (size_subgraph &gt; max_size_subgraph ||
						(size_subgraph == max_size_subgraph &amp;&amp; the_only_initial &lt; min_initial)) {
						max_size_subgraph = size_subgraph;
						min_initial = the_only_initial;
					}
				}
			}
		}
		return min_initial == -1 ? *initials.begin() : min_initial;
	}
private:
	void bfs(int&amp; size_subgraph, set&lt;int&gt;&amp; initials_in_subgraph, vector&lt;vector&lt;int&gt;&gt;&amp; neighbors, set&lt;int&gt;&amp; initials, vector&lt;bool&gt;&amp; visited, int visiting) {
		visited[visiting] = true;
		size_subgraph++;
		if (initials.find(visiting) != initials.end()) {
			initials_in_subgraph.emplace(visiting);
		}
		for (int neighbor : neighbors[visiting]) {
			if (!visited[neighbor]) {
				bfs(size_subgraph, initials_in_subgraph, neighbors, initials, visited, neighbor);
			}
		}
	}
};
</PRE>
</BODY>
</HTML>
