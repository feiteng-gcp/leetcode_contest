<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>426_smoglu.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>426_smoglu.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int minMalwareSpread(vector&lt;vector&lt;int&gt;&gt;&amp; graph, vector&lt;int&gt;&amp; initial) {
        vector&lt;unordered_set&lt;int&gt;&gt; dsets(1);
        int counter = 0;
        int N = graph.size();
        vector&lt;bool&gt; visited (N,false);
        while(1){
            queue&lt;int&gt; myq;
            int j = 0;
            while(visited[j]) j++;
            myq.push(j);
<A NAME="0"></A>            counter++;
            visited[j] = true;
            int k = dsets.size()-1;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match31-0.html#0',2,'match31-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            while(!myq.empty()){
                int s = myq.front();
                // cout &lt;&lt; &quot;s = &quot; &lt;&lt; s &lt;&lt; endl;
                myq.pop();
                dsets[k].insert(s);
                for(int i=0; i&lt;N; i++){
                    // cout &lt;&lt; &quot;graph[s][i]  &quot; &lt;&lt; graph[s][i] &lt;&lt; endl;
                    // cout &lt;&lt; &quot;visited[i]  &quot; &lt;&lt; visited[i] &lt;&lt; endl;
                    if(graph[s][i] &amp;&amp; !visited[i]){
                        visited[i] = true;
                        myq.push(i);
                        // cout &lt;&lt; i &lt;&lt; endl;
                        counter++;
                    }
                }
            }
            // cout &lt;&lt; endl;
            if(counter&lt;N){</B></FONT>
                dsets.resize(k+2);
            }
            else break;
        }
        // cout &lt;&lt; endl;
        // for(auto c:dsets){
        //     for(auto k:c){
        //         cout &lt;&lt; k &lt;&lt; endl;
        //     }
        //     cout &lt;&lt; endl;
        // }
        unordered_map&lt;int,int&gt; mym;
        for(int i=0; i&lt;initial.size(); i++){
            //find group of initial[i]
            for(int j=0; j&lt;dsets.size(); j++){
                if(dsets[j].count(initial[i])){
                    mym[j]++;
                }
            }
        }
        sort(initial.begin(), initial.end());
        int minno = INT_MAX;
        for(auto c:mym){
            if(c.second &lt; minno) minno = c.second;
        }
        if(minno &gt; 1){
            return initial[0];
        }
        else{
            //minno is 1
            int maxno = 0;
            int result = 0;
            for(int i=0; i&lt;initial.size(); i++){
                //find group of initial[i]
                for(int j=0; j&lt;dsets.size(); j++){
                    if(dsets[j].count(initial[i]) &amp;&amp; mym[j]==1){
                        if(dsets[j].size()&gt;maxno){
                            result = initial[i];
                            maxno = dsets[j].size();
                        }
                    }
                }
            }
            return result;
        }
        return initial[0];
    }
};
</PRE>
</BODY>
</HTML>
