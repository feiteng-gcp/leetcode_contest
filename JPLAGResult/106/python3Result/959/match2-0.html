<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>316_a89888689.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>316_a89888689.py</CENTER></H3><HR>
<PRE>
class Solution(object):
    def threeSumMulti(self, A, target):
        &quot;&quot;&quot;
        :type A: List[int]
        :type target: int
        :rtype: int
        &quot;&quot;&quot;
        cnt = collections.Counter(A)
        a = sorted(cnt.keys())
        MOD = 10**9+7
        res = 0
        for i in range(len(a)):
            if target/3==a[i]:
                if cnt[a[i]] &gt;=3:
                    res += (cnt[a[i]] * (cnt[a[i]]-1) * (cnt[a[i]]-2))/6
                    res %= MOD
<A NAME="0"></A>          
            for j in range(i+1, len(a)):
                if a[i]*2 + a[j] == target and cnt[a[i]]&gt;=2:
                    res += (cnt[a[i]] * (cnt<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match2-1.html#0',3,'match2-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>[a[i]]-1)) /2 * cnt[a[j]]
                    res %= MOD
                    # print(&quot;2&quot;, res, a[i], a[j], (cnt[a[i]] * (cnt[a[i]])-1) /2)
                elif a[j]*2 + a[i] == target and cnt[a[j]]&gt;=2:
                    res += (cnt[a[j]] * (cnt[</B></FONT>a[j]]-1)) /2* cnt[a[i]]
                    res %= MOD
                    # print(&quot;2&quot;, res, a[i], a[j])
                elif target - a[i] - a[j] in cnt and a[i] &lt; target - a[i] - a[j] &lt; a[j]:
                    res += cnt[a[i]] * cnt[a[j]] * cnt[target - a[i] - a[j]]
                    res %= MOD
                    # print(&quot;1&quot;, res)
        return int(res)
                    
</PRE>

</BODY>
</HTML>
