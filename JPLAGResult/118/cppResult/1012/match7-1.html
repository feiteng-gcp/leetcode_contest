<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>10_Kmcode.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>10_Kmcode.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    string make(string z) {
<A NAME="0"></A>	string rep = &quot;&quot;;
	bool beg = false;
	string bas;
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match7-0.html#0',2,'match7-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    bool dt=false;
	for (int i = 0; i &lt; z.size(); i++) {
		if (z[i] == '(') {
			beg = true;
			continue;
		}
		if (z[i] == ')') {
			beg = false;</B></FONT>
			break;
		}
        if(z[i]=='.'){
            dt=true;
        }
		if (beg) {
			if (isdigit(z[i])) {
				rep.push_back(z[i]);
			}
		}
		else {
			bas.push_back(z[i]);
		}
	}
    if(dt==false){
        bas.push_back('.');
    }
	bool ok2 = true;
	for (int i = 0; i &lt; rep.size(); i++) {
		if (rep[i] != '0') {
			ok2 = false;
		}
	}
	if (ok2) {
		rep.clear();
	}
	bool ok = true;
	for (int i = 0; i &lt; rep.size(); i++) {
		if (rep[i] != '9') {
			ok = false;
		}
	}
	if (rep.size() &amp;&amp; ok) {
		reverse(bas.begin(), bas.end());
		bool carry = true;
		for (int i = 0; i &lt; bas.size(); i++) {
			if (bas[i] == '.')continue;
			if (bas[i] == '9') {
				bas[i] = '0';
				continue;
			}
			bas[i]++;
			carry = false;
			break;
		}
		if (carry) {
			bas.push_back('1');
		}
		reverse(bas.begin(), bas.end());
		rep.clear();
	}
	for (int i = 0; i &lt; 120; i++) {
		bas += rep;
	}
	while (bas.back() == '0') {
		bas.pop_back();
	}
	while (bas.size() &gt; 110) {
		bas.pop_back();
	}
    if(bas.back()=='.')bas.pop_back();
	return bas;
}
    bool isRationalEqual(string S, string T) {
        return make(S)==make(T);
    }
};
</PRE>
</BODY>
</HTML>
