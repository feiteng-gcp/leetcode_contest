<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>81_daltao.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>81_daltao.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match25-1.html#0',3,'match25-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
        public boolean isRationalEqual(String S, String T) {
            RationalNumber a = new RationalNumber(S);
            RationalNumber b = new</B></FONT> RationalNumber(T);
            return RationalNumber.equal(a, b);
        }

        public static String repeat(String s, int k)
        {
            StringBuilder r = new StringBuilder();
            for(int i = 0; i &lt; k; i++)
            {
                r.append(s);
            }
            return r.toString();
        }

        public static String addOne(String s)
        {
            int notNineIndex = s.length() - 1;
            while(notNineIndex &gt;= 0 &amp;&amp; s.charAt(notNineIndex) == '9')
            {
                notNineIndex--;
            }

            if(notNineIndex == -1)
            {
                return &quot;1&quot; + repeat(&quot;0&quot;, s.length());
            }

            return s.substring(0, notNineIndex) + (char)(s.charAt(notNineIndex) + 1) + s.substring(notNineIndex + 1, s.length());
<A NAME="1"></A>        }

        public static class RationalNumber{
            <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match25-1.html#1',3,'match25-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>String intPart = &quot;&quot;;
            String nonRepPart = &quot;&quot;;
            String repPart = &quot;0&quot;;

            public RationalNumber(String s)
            {
                int dotIndex = s.indexOf(&quot;.&quot;);
                if(dotIndex == -1)
                {
                    i</B></FONT>ntPart = s;
                    return;
                }
                intPart = s.substring(0, dotIndex);
                s = s.substring(dotIndex + 1, s.length());

                int leftIndex = s.indexOf(&quot;(&quot;);
                if(leftIndex == -1)
                {
                    nonRepPart = s;
                }
                else
                {
                    nonRepPart = s.substring(0, leftIndex);
                    repPart = s.substring(leftIndex + 1, s.length() - 1);
                }


                if(repPart.length() == 4)
                {
                    String piece = repPart.substring(0,2);
                    if(repPart.equals(piece + piece))
                    {
                        repPart = piece;
                    }
                }
                if(repPart.length() == 3)
                {
                    String piece = repPart.substring(0,1);
                    if(repPart.equals(piece + piece + piece))
                    {
                        repPart = piece;
                    }
                }
                if(repPart.length() == 2)
                {
                    String piece = repPart.substring(0,1);
                    if(repPart.equals(piece + piece))
                    {
                        repPart = piece;
                    }
                }

                Deque&lt;Character&gt; deque = new ArrayDeque();
                for(char c : repPart.toCharArray())
                {
                    deque.addLast(c);
                }
                while(nonRepPart.endsWith(deque.getLast().toString()))
                {
                    nonRepPart = nonRepPart.substring(0, nonRepPart.length() - 1);
                    deque.addFirst(deque.removeLast());
                }

                repPart = &quot;&quot;;
                while(!deque.isEmpty())
                {
                    repPart = repPart + deque.removeFirst();
                }

                if(repPart.equals(&quot;9&quot;))
                {
                    repPart = &quot;0&quot;;
                    if(nonRepPart.length() &gt; 0)
                    {
                        nonRepPart = addOne(nonRepPart);
                    }
                    else
                    {
                        intPart = addOne(intPart);
                    }
                }
            }

            public static boolean equal(RationalNumber a, RationalNumber b)
            {
                return a.intPart.equals(b.intPart) &amp;&amp; a.nonRepPart.equals(b.nonRepPart) &amp;&amp; a.repPart.equals(b.repPart);
            }

            @Override
            public String toString() {
                return intPart + &quot;.&quot; + nonRepPart + &quot;(&quot; + repPart + &quot;)&quot;;
            }
        }
    }
</PRE>

</BODY>
</HTML>
