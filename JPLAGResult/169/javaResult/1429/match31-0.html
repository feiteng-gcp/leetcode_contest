<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>78_agnyaathavaasi.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>78_agnyaathavaasi.java</CENTER></H3><HR>
<PRE>
class Solution {
    public boolean isSolvable(String[] words, String result) {
        int[] map = new int[26];
<A NAME="0"></A>        boolean[] used = new boolean[10];
        Arrays.fill(map, -1);
        
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match31-1.html#0',3,'match31-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Set&lt;Integer&gt; set = new HashSet&lt;&gt;();
        for (int i = 0; i &lt; words.length; i++) {
            for (int j = 0; j &lt; words[i].length(); j++) {
                set.add(words[i].charAt(j) - 'A');
            }
        }
        
        for (int i = 0; i &lt; result.length(); i++)
        {
            set.add(result.charAt(i) - 'A');
<A NAME="1"></A>        }        
        List&lt;Integer&gt; chars = new ArrayList&lt;&gt;(set);
        return solve2</B></FONT>(0, chars, map, used, words, result);
    <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match31-1.html#1',3,'match31-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
    
    private static boolean solve2(int index, List&lt;Integer&gt; chars, int[] map, boolean[] used, String[] words, String result) {
        if (index == chars.size()) {</B></FONT>
            int totalSum = 0;
            for (int i = 0; i &lt; words.length; i++) {
                int num = 0;
                for (int j = 0; j &lt; words[i].length(); j++) {
                    num *= 10;
                    num += map[words[i].charAt(j) - 'A'];
                }
<A NAME="2"></A>                totalSum += num;
            }
            
            <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match31-1.html#2',3,'match31-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int num2 = 0;
            for (int i = 0; i &lt; result.length(); i++) {
                num2 *= 10;
                num2 += map[result.charAt(i) - 'A'];
            }
            
//                                System.out.println(Arrays.toString(map));
            
//             System.out.println(Arrays.toString(used));
            
//             System.out.println(totalSum + &quot; &quot; + num2);
            
            return totalSum == num2;
        }</B></FONT> else {
           for (int j = 0; j &lt; 10; j++) {
                    if (!used[j]) {
                        used[j] = true;
                        map[chars.get(index)] = j;
                        
                        boolean ret = solve2(index + 1, chars, map, used, words, result);
                        if (ret) {
                            return true;
                        }
                        
                        used[j] = false;
                        map[chars.get(index)] = -1;         
                    }
                } 
        }
        
        return false;
    }
    
    private static boolean solve(int index, int index1, int resultIndex, int[] map, boolean[] used, String[] words, String result) {
        if (resultIndex == result.length()) {
            int totalSum = 0;
            for (int i = 0; i &lt; words.length; i++) {
                int num = 0;
                for (int j = 0; j &lt; words[i].length(); j++) {
                    num *= 10;
                    num += map[words[i].charAt(j) - 'A'];
                }
                totalSum += num;
            }
            
            int num2 = 0;
            for (int i = 0; i &lt; result.length(); i++) {
                num2 *= 10;
                num2 += map[result.charAt(i) - 'A'];
            } 
            
            //             System.out.println(Arrays.toString(map));
            
//             System.out.println(Arrays.toString(used));
            
            //System.out.println(totalSum + &quot; &quot; + num2);
            
            return totalSum == num2;
        }
        
        if (index == words.length) {
            if (map[result.charAt(resultIndex) - 'A'] == -1) {
                for (int j = 0; j &lt; 10; j++) {
                    if (!used[j]) {
                        used[j] = true;
                        map[result.charAt(resultIndex) - 'A'] = j;
                        
                        boolean ret = solve(index, index1, resultIndex + 1, map, used, words, result);
                        if (ret) {
                            return true;
                        }
                        
                        used[j] = false;
<A NAME="3"></A>                        map[result.charAt(resultIndex) - 'A'] = -1;         
                    }
                }
            } else <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match31-1.html#3',3,'match31-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
                  boolean ret = solve(index, index1, resultIndex + 1, map, used, words, result);
                        if (ret) {
                            return true;
                        }
                        
            }</B></FONT>
        } else {
                if (map[words[index].charAt(index1) - 'A'] == -1) {
                   for (int j = 0; j &lt; 10; j++) {
                       if (!used[j]) {
                           used[j] = true;
                           map[words[index].charAt(index1) - 'A'] = j;
                           boolean ret;
                           if (index1 + 1 &lt; words[index].length()) {
                              ret = solve(index, index1 + 1, 0, map, used, words, result); 
                           } else {
                              ret = solve(index + 1, 0, 0, map, used, words, result);
                           }
                           
                           if (ret) {
                               return true;
                           }
                           
                           map[words[index].charAt(index1) - 'A'] = -1;
                           used[j] = false;
                       }
                   }  
               } else {
                    boolean ret;
                    if (index1 + 1 &lt; words[index].length()) {
                              ret = solve(index, index1 + 1, 0, map, used, words, result); 
                           } else {
                              ret = solve(index + 1, 0, 0, map, used, words, result);
                    } 
                    if (ret) {
                               return true;
                    }
                }
        }
        
        return false;
    }
 }
</PRE>

</BODY>
</HTML>
