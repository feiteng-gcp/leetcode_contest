<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>20_nevergiveup.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>20_nevergiveup.java</CENTER></H3><HR>
<PRE>
class Solution {
	
		
	private boolean[] vis = new boolean[10];
	
	private boolean[] forbid = new boolean[1000];
	private int[] valueMap1 = new int[1000] , valueMap2 = new int[1000];
	
    public boolean isSolvable(String[] words, String result) {
    	for (String word : words) {
    		if (word.length() &gt; 1) {
    			forbid[word.charAt(0)] = true;    		
    		}
    	}
    	if (result.length() &gt; 1) {
    		forbid[result.charAt(0)] = true;    		
    	}    	
    	
    	for (String word : words) {
    		int value = 1;    		
    		for (int i = word.length() - 1;i &gt;= 0;i --) {
    			char ch = word.charAt(i);
    			valueMap1[ch] += value;    			    			
    			value *= 10;    			
    		}
    	}
    	int value = 1;
    	for (int i = result.length() - 1;i &gt;= 0;i --) {
    		char ch = result.charAt(i);
    		valueMap2[ch] += value;    		
    		value *= 10;
    	}    	
<A NAME="0"></A>    	Set&lt;Character&gt; set = new HashSet&lt;&gt;();    	
    	for (String word : words) {
    		for (char ch : word.toCharArray()) {
    			set.add(ch);    	<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match27-1.html#0',3,'match27-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	
    		}    		
    	}
    	for (char ch : result.toCharArray()) {</B></FONT>
    		set.add(ch);
<A NAME="1"></A>    	}
    	List&lt;Character&gt; list = new ArrayList&lt;&gt;(set);
    	return backtracking(list , 0 , words , result , 0 , 0);
    <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match27-1.html#1',3,'match27-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}
<A NAME="2"></A>    
    private boolean backtracking(List&lt;Character&gt; list , int current , String[] words , String result , int sum1 , int sum2) {
    	if (c</B></FONT>urrent == list.size()) {
    		return sum<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match27-1.html#2',3,'match27-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>1 == sum2;    		
    	} else {
    		for (int i = 0;i &lt; 10;i ++) {
    			if (!vis[i]) {</B></FONT>
    				if (i == 0 &amp;&amp; forbid[list.get(current)]) {
    					continue;    					
    				}    				
<A NAME="3"></A>    				vis[i] = true;
    				int s1 = sum1 + valueMap1[list.get(current)] * i;
    				int s2 = sum2 + valueMap2[list.get(current)] * i;
    				if (backtracking(list , <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match27-1.html#3',3,'match27-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>current + 1 , words , result , s1 , s2)) {
    					return true;
    				}
    				vis[i] = false;
    			}
    		}    		
    		return false;
    	}    	
    }
    
}</B></FONT>
</PRE>

</BODY>
</HTML>
