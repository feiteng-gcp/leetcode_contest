<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>28_alpha_null.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>28_alpha_null.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    bool bad[26][10];
    vector&lt;string&gt; W;
    int EXP[7], COST[26];
<A NAME="0"></A>    map&lt;char,int&gt; M;
    bool ok;
    vector&lt;char&gt; C;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match12-1.html#0',3,'match12-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>    void recur(int b, int x, int val) {
        if (ok) return;
        if (x == C.size()) {
            if (val == 0) printf(&quot;YAY!\n&quot;);
            ok |= (val == 0);
            return;
        }
        for (int i=0;i&lt;=9;++i) {
            if (!bad[C[x]-'A'][i] &amp;&amp; (b&amp;(1&lt;&lt;i)) == 0) {
                //printf(&quot;%c: %d, &quot;, C[x], i);
                recur(b|(1&lt;&lt;i), x+1, val + COST[C[x]-'A'] * i);
            }
        }</B></FONT>
    }
    
    bool isSolvable(vector&lt;string&gt;&amp; WW, string R) {
        W = WW;
        EXP[0] = 1;
        for (int i=1;i&lt;7;++i) EXP[i] = EXP[i-1] * 10;
        for (auto w : W) bad[w[0]-'A'][0] = true;
        bad[R[0]-'A'][0] = true;
        for (auto w : W) {
            int N = w.size();
            for (int i=0;i&lt;N;++i) M[w[i]] += EXP[N - i - 1];
        }
        for (int i=0;i&lt;R.size();++i) M[R[i]] -= EXP[R.size() - i - 1];
        //printf(&quot;M has size %d\n&quot;, M.size());
        //for (auto pr : M) printf(&quot;%c: %d\n&quot;, pr.first, pr.second);
        if (M.size() &gt; 10) return false;
        for (auto pr : M) {
            C.push_back(pr.first);
            COST[pr.first-'A'] = pr.second;
        }
        recur(0, 0, 0);
        // 'S'-&gt; 9, 'E'-&gt;5, 'N'-&gt;6, 'D'-&gt;7, 'M'-&gt;1, 'O'-&gt;0, 'R'-&gt;8, 'Y'-&gt;'2'
        //printf(&quot;CHECK %d\n&quot;,M['S'] * 9 + M['E'] * 5 + M['N'] * 6 + M['D'] * 7 + M['M'] * 1 + M['R'] * 8 + M['Y'] * 2);
        return ok;
    }
};
</PRE>
</BODY>
</HTML>
