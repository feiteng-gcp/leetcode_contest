<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>234_Hewitt_1570.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>234_Hewitt_1570.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    bool vis[26],ok,used[11];
    int A[11],B[26],pw[11],c,L[26],R[26],D[11]={5,4,6,1,2,3,0,8,7,9};
    char str[11];
    bool dfs(int now){
        if(now==c){
            int a=0,b=0;
            for(int i=0;i&lt;c;i++){
                a+=A[B[str[i]-'A']]*L[str[i]-'A'];
<A NAME="0"></A>                b+=A[B[str[i]-'A']]*R[str[i]-'A'];
            }
            if(a==b)return 1;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match9-1.html#0',3,'match9-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            return 0;
        }
        for(int i=0;i&lt;=9;i++){
            if(used[i])continue;
            used[i]=1;
            A[now]=D[i];
            if(dfs(now+1))return 1;
            used[i]=0;
        }
        return 0;
    }
<A NAME="1"></A>    bool isSolvable(vector&lt;string&gt;&amp; words, string result) {</B></FONT>
        pw[0]=1;
        int maxx=0;
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match9-1.html#1',3,'match9-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        for(int i=1;i&lt;8;i++)pw[i]=pw[i-1]*10;
        for(int i=0;i&lt;words.size();i++){
            for(int j=0;j&lt;words[i].size();j++){</B></FONT>
                char cc=words[i][j];
                maxx=max(maxx,(int)words[i].size());
                int pos=words[i].size()-j-1;
                L[cc-'A']+=pw[pos];
                if(!vis[cc-'A']){
                    vis[cc-'A']=1;
                    str[c]=cc;
                    B[cc-'A']=c++;
                }
            }
        }
        for(int i=0;i&lt;result.size();i++){
            char cc=result[i];
            int pos=result.size()-i-1;
            R[cc-'A']+=pw[pos];
            if(!vis[cc-'A']){
                vis[cc-'A']=1;
                str[c]=cc;
                B[cc-'A']=c++;
            }
        }
        if(maxx&gt;result.size()||maxx&lt;result.size()-3)return false;
        return dfs(0);
    }
};
</PRE>
</BODY>
</HTML>
