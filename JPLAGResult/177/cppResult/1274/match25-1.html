<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>243_TheBloodElf.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>243_TheBloodElf.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    int daysBetweenDates(string date1, string date2) {
        return abs(numberOf1970(date1) - numberOf1970(date2));
    }

    // 求出日期相对于1970年1月1日相隔多少天
    int numberOf1970(string date1) {
        int result = 0;
        set&lt;int&gt; day31s = {1,3,5,7,8,10,12};
<A NAME="0"></A>        vector&lt;string&gt; ymd = split(date1, &quot;-&quot;);
        int year = stoi(ymd[0]); int month = stoi(ymd[1]); int day = stoi(ymd[2]);
        for (int y = 1970; y &lt; year; y ++) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#0',2,'match25-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>            if (isLeapYear(y)) {
                result += 366;
            } else {
                result += 365;
            }
        }
        for (int m = 1; m &lt; month; m ++) {
            if (day31s.find(m) != day31s.end()) {
<A NAME="1"></A>                result += 31;
            } else if(m == 2) {
                if (isLeapYear(year)) {</B></FONT>
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match25-0.html#1',2,'match25-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>                    result += 29;
                } else {
                    result += 28;
                }
            } else {
                result += 30;
            }
        }
        result += day - 1;
        return result;
    }
    // 判断一年是否是润年
    bool isLeapYear(int year) {</B></FONT>
        return ((year % 4 == 0) &amp;&amp; (year % 100 != 0)) || (year % 400 == 0);
    }
    //字符串分割函数
    vector&lt;string&gt; split(string str, string pattern) {
        string::size_type pos;
        vector&lt;string&gt; result;
        str += pattern;//扩展字符串以方便操作
        for(unsigned int i = 0; i &lt; str.size(); i ++) {
            pos = str.find(pattern, i);
            if(pos &lt; str.size()) {
                string s=str.substr(i, pos-i);
                result.push_back(s);
                i = pos + pattern.size() - 1;
            }
        }
        return result;
    }
};
</PRE>
</BODY>
</HTML>
