<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>412_Hewitt_1570.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>412_Hewitt_1570.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    vector&lt;int&gt;mp[103];
    struct node {
        double x;
        int t;
    };
    bool vis[103],leaf[103];
    int son[103],dep[103];
    void dfs(int u,int d,int f){
<A NAME="0"></A>        if(mp[u].size()==1&amp;&amp;mp[u][0]==f)leaf[u]=1;
        int cnt=0;
        vis[u]=1;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match10-1.html#0',3,'match10-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        dep[u]=d;
        for(int i=0;i&lt;mp[u].size();i++){
            int v=mp[u][i];
            if(vis[v])continue;
            cnt++;
<A NAME="1"></A>            dfs(v,d+1,u);
        }</B></FONT>
        son[u]=cnt;
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match10-1.html#1',3,'match10-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>    }
    double frogPosition(int n, vector&lt;vector&lt;int&gt;&gt;&amp; edges, int t, int target) {
        for(int i=0;i&lt;edges.size();i++){
            int u=edges[i][0],v=edges[i][1];
            mp[u].push_back(v);
            mp[v].push_back(u);
        }</B></FONT>
        dfs(1,0,-1);
        if(n==1)return 1;
        if(t&lt;dep[target])return 0;
        if(t&gt;dep[target]&amp;&amp;!leaf[target])return 0;
        memset(vis,0,sizeof(vis));
        queue&lt;node&gt;q;
        q.push({1,1});
        vis[1]=1;
        while(!q.empty()){
            node s = q.front(); q.pop();
            if(s.t==target)return s.x;
            int cnt = mp[s.t].size();
            for(int i=0;i&lt;cnt;i++){
                int v = mp[s.t][i];
                if(vis[v])continue;
                vis[v]=1;
                q.push({s.x/son[s.t],v});
            }
        }
        return 1;
    }
};
</PRE>
</BODY>
</HTML>
