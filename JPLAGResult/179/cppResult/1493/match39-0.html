<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>474__kay.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>474__kay.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:

	vector&lt;vector&lt;int&gt;&gt; G;
	vector&lt;double&gt; ans;
	vector&lt;int&gt; d;
	
	void solve(vector&lt;vector&lt;int&gt;&gt;&amp; G, int now, int per, double p, int depth){
		
       // cout&lt;&lt;&quot;now &quot;&lt;&lt;now&lt;&lt;&quot;p = &quot;&lt;&lt;p&lt;&lt;endl;
		ans[now] = p;
		d[now] = depth;
		
		for(int next : G[now]){
			if(per == next) continue;
			
			if(per == -1)solve(G, next, now, p/((double)G[now].size()), depth+1);
			else solve(G, next, now, p/((double)G[now].size()-1), depth+1);
		}
	}
	
    double frogPosition(int n, vector&lt;vector&lt;int&gt;&gt;&amp; edges, int t, int target) {
        G.clear();
		ans.clear();
		d.clear();
		
		G.resize(n);
		ans.resize(n);
		d.resize(n);
<A NAME="0"></A>		
	    target--;
		
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match39-1.html#0',3,'match39-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>		for(int i = 0; i &lt; edges.size(); i++){
			G[edges[i][0]-1].push_back(edges[i][1]-1);
			G[edges[i][1]-1].push_back(edges[i][0]-1);
		}
		
		solve(G, 0, -1, 1.0, 0);
		//cout&lt;&lt;d[target]&lt;&lt;&quot; &lt;= depth &quot;&lt;&lt;G[target].size()&lt;&lt;endl;
        if(target == 0){
            if(d[target] == t || (G[target].size() &lt;= 0 &amp;&amp; d[target] &lt;= t)) {
			    return ans[target];
		    } 
        } else {
          //  cout&lt;&lt;&quot;t = &quot;&lt;&lt;t&lt;&lt;endl;
	    	if(d[target] == t || (G[target].size() &lt;= 1 &amp;&amp; d[target] &lt;= t)) {
			    return ans[target];
		    } 
        }
		
		return 0.0;
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
