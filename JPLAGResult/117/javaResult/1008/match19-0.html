<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>20_honghongdepengpeng.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>20_honghongdepengpeng.java</CENTER></H3><HR>
<PRE>
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    private Map&lt;TreeNode, Integer&gt; mustMap, coveredMap, notMap;
    
    public int minCameraCover(TreeNode root) {
<A NAME="0"></A>        mustMap = new HashMap&lt;&gt;();
        coveredMap = new HashMap&lt;&gt;();
        notMap = new HashMap&lt;&gt;();
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match19-1.html#0',3,'match19-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>return getCount(root, false, false);
    }
    
    private int getCount(TreeNode node, boolean must, boolean covered) {</B></FONT>
        if (node == null) {
            return 0;
        }
        if (must) {
            if (mustMap.containsKey(node)) {
                return mustMap.get(node);
            }
            
            int count = getCount(node.left, false, true) + getCount(node.right, false, true) + 1;
            mustMap.put(node, count);
            return count;
        } else {
            
            if (covered) {
                if (coveredMap.containsKey(node)) {
                    return coveredMap.get(node);
                }
                int count = Math.min(getCount(node.left, false, true) + getCount(node.right, false, true) + 1, 
                                getCount(node.left, false, false) + getCount(node.right, false, false));
                coveredMap.put(node, count);
                return count;
            } else {
                if (notMap.containsKey(node)) {
<A NAME="1"></A>                    return notMap.get(node);
                }
                int count = getCount(node.left, false, true) + getCount(node.right, false, true) + 1;
                <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match19-1.html#1',3,'match19-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if (node.left != null) {
                    count = Math.min(count, getCount(node.left, true, false) + getCount(node.right, false, false));
                }
                if (node.right != null) {
                    count = Math.min(count, getCount(node.right, true, false) + getCount(node.left, false, false));
                }</B></FONT>
                notMap.put(node, count);
                return count;
            }
        }
    }
}
</PRE>

</BODY>
</HTML>
