<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>460_umopepisdn.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>460_umopepisdn.java</CENTER></H3><HR>
<PRE>
class Solution {
    public List&lt;String&gt; watchedVideosByFriends(List&lt;List&lt;String&gt;&gt; watchedVideos, int[][] friends, int id, int targetLevel) {
        //id is start
		//bfs from start
		Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();
		seen.add(id);
<A NAME="0"></A>		int level = 0;
		List&lt;Integer&gt; curr = new ArrayList&lt;&gt;();
		curr.add(id);
		while (level &lt; targetLevel) {<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match16-1.html#0',3,'match16-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
			List&lt;Integer&gt; next = new ArrayList&lt;&gt;();
			for (int friend : curr) {
				//get friends, add those that have not been seen
<A NAME="1"></A>				for (int i : friends[friend]) {
					if (!seen.contains(i)) {</B></FONT>
						seen.add(i);
						next.add(i);<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match16-1.html#1',3,'match16-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
					}
				}
			}
			
			curr = next;
			level++;
		}</B></FONT>
		
<A NAME="2"></A>		//process results
		// order by frequency, then alphabetically
		Map&lt;String, Integer&gt; countMap = new HashMap&lt;&gt;();
<A NAME="3"></A>		Set&lt;String&gt; vi<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match16-1.html#2',3,'match16-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>deos = new HashSet&lt;&gt;();
		for (int i : curr) {
			for (String video : watchedVideos.get(i)) {</B></FONT>
				countMap.put(video, countMap.getOrDefault(video,<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match16-1.html#3',3,'match16-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B> 0) + 1);
				videos.add(video);
			}
		}
		
		List&lt;String&gt; videoList = new ArrayList&lt;&gt;();
		videoList.addAll(videos);
		Collections.sort(videoList, new Comparator&lt;String&gt;() {
			@Override
			public int compare(String s1, String s2) {
				int cnt1 = countMap.get(s1);
				int cnt2 = countMap.get(s2);
				if (cnt1 == cnt2) {
<A NAME="4"></A>					return s1.compareTo(s2);</B></FONT>
				} else {
					return cnt1 - cnt2;
				}<FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match16-1.html#4',3,'match16-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
			}
		});
        
		// for (String s : videoList) {
		// 	System.out.println(countMap.get(s));
		// }
		
		return videoList;
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
