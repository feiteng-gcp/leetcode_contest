<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>367_Itachi666.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>367_Itachi666.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match0-1.html#0',3,'match0-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
public:
    int n,m;
    vector&lt;vector&lt;int&gt;&gt; f;
    
    void flow(int x, int y, int c, vector&lt;vector&lt;int&gt;&gt;&amp; grid) {
        while (0&lt;=x &amp;&amp; x&lt;n &amp;&amp; 0&lt;=y &amp;&amp; y&lt;m &amp;&amp; f[x][y]&gt;c) {
            // cout&lt;&lt;x&lt;&lt;' '&lt;&lt;y&lt;&lt;endl;
            f[x][y]=c;
            if (grid[x][y]==1)
                y++;
            else if (grid[x][y]==2)
                y--;
            else if (grid[x][y]==3)
                x++;
            else if (grid[x][y]==4)
                x--;
        }
    }
    
    void output() {
        for (int i=0;i&lt;n;i++) {
            for (int j=0;j&lt;m;j++)
                cout&lt;&lt;(f[i][j]==0x7fffffff?-1:f[i][j])&lt;&lt;' ';
            cout&lt;&lt;endl;
        }
    }
    
    int minCost(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {
        n=grid.size();
        m=grid[0].size();
        f.clear();
        f.resize(n, vector&lt;int&gt;(m, 0x7fffffff));
        flow(0,0,0, grid);
        
        int count=0;
        while (f[n-1][m-1]==0x7fffffff) {
            count++;
            for (int i=0;i&lt;n;i++) 
                for (int j=0;j&lt;m;j++) 
                    if (f[i][j]==count-1) {
                        for (int k=1;k&lt;=4;k++)
                            if (k!=grid[i][j]) {
                                int x=i, y=j;
                                if (k==1)
                                    y++;
                                else if (k==2)
                                    y--;
                                else if (k==3)
                                    x++;
                                else if (k==4)
                                    x--;
                                flow(x,y,count, grid);
                            }
                    }
            // output();
        }
        
        return f[n-1][m-1];
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
