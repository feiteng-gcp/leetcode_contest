<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>450_karthickm.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>450_karthickm.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match3-1.html#0',3,'match3-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>struct Cell
{
  int x, y;
  int cost;
};

bool operator &lt;(Cell a, Cell b)
{
  return a.cost &gt; b.cost;
}

class Solution
{
  private:

  bool isValidCell(int x, int y, int n, int m)
  {
    return x &gt;= 0 &amp;&amp; x &lt; n &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; m;
  }

  int solve(vector&lt;vector&lt;int&gt;&gt; &amp;a)
  {
    priority_queue&lt;Cell&gt; Q;
    Cell cell, next;

    int n = a.size();
    int m = a[0].size();
    bool visited[105][105][105] = {0};

    cell.x = 0;
    cell.y = 0;
    cell.cost = 0;
    Q.push(cell);
    while(!Q.empty())
    {
      cell = Q.top();
      Q.pop();

      if(cell.x == n - 1 &amp;&amp; cell.y == m - 1)
      {
        return cell.cost;
      }

      if(a[cell.x][cell.y] == 1)
      {
        next.x = cell.x;
        next.y = cell.y + 1;
        next.cost = cell.cost;
        if(isValidCell(next.x, next.y, n, m))
        {
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y - 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y - 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x - 1, cell.y, n, m))
        {
          next.x = cell.x - 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x + 1, cell.y, n, m))
        {
          next.x = cell.x + 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
      }
      else if(a[cell.x][cell.y] == 2)
      {
        next.x = cell.x;
        next.y = cell.y - 1;
        next.cost = cell.cost;
        if(isValidCell(next.x, next.y, n, m))
        {
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y + 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y + 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x - 1, cell.y, n, m))
        {
          next.x = cell.x - 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x + 1, cell.y, n, m))
        {
          next.x = cell.x + 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
      }
      else if(a[cell.x][cell.y] == 3)
      {
        next.x = cell.x + 1;
        next.y = cell.y;
        next.cost = cell.cost;
        if(isValidCell(next.x, next.y, n, m))
        {
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x - 1, cell.y, n, m))
        {
          next.x = cell.x - 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y - 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y - 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y + 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y + 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
      }
      else
      {
        next.x = cell.x - 1;
        next.y = cell.y;
        next.cost = cell.cost;
        if(isValidCell(next.x, next.y, n, m))
        {
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x + 1, cell.y, n, m))
        {
          next.x = cell.x + 1;
          next.y = cell.y;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y - 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y - 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
        if(isValidCell(cell.x, cell.y + 1, n, m))
        {
          next.x = cell.x;
          next.y = cell.y + 1;
          next.cost = cell.cost + 1;
          if(!visited[next.x][next.y][next.cost])
          {
            visited[next.x][next.y][next.cost] = true;
            Q.push(next);
          }
        }
      }
    }

    return -1;
  }

  public:

  int minCost(vector&lt;vector&lt;int&gt;&gt; &amp;a)
  {
    return solve(a);
  }
};</B></FONT>
</PRE>
</BODY>
</HTML>
