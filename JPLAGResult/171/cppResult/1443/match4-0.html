<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>306_user6767W.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>306_user6767W.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match4-1.html#0',3,'match4-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
public:
    int dis(int x1, int y1, int x2, int y2) {
        return abs(x1 - x2) + abs(y1 - y2);
    }
    pair&lt;int, int&gt; position(char c) {
        int x, y, t = c - 'A';
        pair&lt;int, int&gt; p;
        p.second = t % 6;
        p.first = t / 6;
        return p;
    }
    int solve(int p, int x1, int y1, int x2, int y2, map&lt;vector&lt;int&gt;, int&gt; &amp;dp, const string &amp;word) {
        if(p &gt;= word.size()) return 0;
        vector&lt;int&gt; key;
        key.push_back(p); key.push_back(x1); key.push_back(y1); key.push_back(x2); key.push_back(y2);
<A NAME="1"></A>        if(dp.find(key) != dp.end()) return dp[key];
        
        int res = 0;</B></FONT>
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match4-1.html#1',3,'match4-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        pair&lt;int, int&gt; pos = position(word[p]);
        //1
        int res1 = 0;
        if(-1 == x1 &amp;&amp; -1 == y1) res1 += 0;
        else res1 += dis(pos.first, pos.second, x1, y1);
        res1 += solve(p + 1, pos.first, pos.second, x2, y2, dp, word);
        
        //2
        int res2 = 0;
        if(-1 == x2 &amp;&amp; -1 == y2) res2 += 0;
        else res2 += dis(pos.first, pos.second, x2, y2);
        res2 += solve(p + 1, x1, y1, pos.first, pos.second, dp, word);
    
        return dp[key] = min(res1, res2);
    }
    
    int minimumDistance(string word) {
        map&lt;vector&lt;int&gt;, int&gt; dp;
        return solve(0, -1, -1, -1, -1, dp, word);
    }
};</B></FONT>
</PRE>
</BODY>
</HTML>
