<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>4_wjli.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>4_wjli.cpp</CENTER></H3><HR>
<PRE>


class Solution {
	int nn;

<A NAME="0"></A>	int solve(int a, vector&lt;vector&lt;int&gt;&gt; &amp;p, vector&lt;int&gt; &amp;dist, vector&lt;int&gt; &amp;ct) {
		ct[a] = 1;
		for (auto pp : p[a]) {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>			if (dist[pp] == -1) {
				dist[pp] = dist[a] + 1;
				ct[a] += solve(pp, p, dist, ct);
			}
		}
		return ct[a];
	}

	void browse(int a, vector&lt;vector&lt;int&gt;&gt; &amp;p, vector&lt;int&gt; &amp;dist, vector&lt;int&gt; &amp;ct, vector&lt;int&gt; &amp;ans) {</B></FONT>
		for (auto pp : p[a]) {
			if (ans[pp] == -1) {
				ans[pp] = ans[a] + (nn - ct[pp]) - (ct[pp]);
				browse(pp, p, dist, ct, ans);
			}
		}
	}

public:
	vector&lt;int&gt; sumOfDistancesInTree(int N, vector&lt;vector&lt;int&gt;&gt;&amp; edges) {
		nn = N;

		vector&lt;vector&lt;int&gt;&gt; p(N);
		vector&lt;int&gt; dist(N, -1), ans(N, -1), ct(N, 0);
		int i, j, k;

		for (i = 0; i &lt; N - 1; i++) {
			p[edges[i][0]].push_back(edges[i][1]);
			p[edges[i][1]].push_back(edges[i][0]);
		}

		dist[0] = 0;
		solve(0, p, dist, ct);		

		ans[0] = 0;
		for (i = 0; i &lt; N; i++) ans[0] += dist[i];

		browse(0, p, dist, ct, ans);

		return ans;
	}
};
</PRE>
</BODY>
</HTML>
