<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>327_Captain_Mushroom.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>327_Captain_Mushroom.cpp</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>const int MAXN = 1010;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match29-1.html#0',3,'match29-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
public:

    bool own[MAXN], visit[MAXN], ky[MAXN];

    int maxCandies(vector&lt;int&gt;&amp; status, vector&lt;int&gt;&amp; candies, vector&lt;vector&lt;int&gt;&gt;&amp; keys, vector&lt;vector&lt;int&gt;&gt;&amp; containedBoxes, vector&lt;int&gt;&amp; initialBoxes) {

        int ans = 0;
        int n = status.size();</B></FONT>
        queue&lt;int&gt; q;
        
        memset(visit, false, sizeof(visit));
        memset(own, false, sizeof(own));
        for (auto b : initialBoxes)
        {
            own[b] = true;
            if (status[b] == 1)
            {
                //printf(&quot;b:%d\n&quot;, b);
                ans += candies[b];
                visit[b] = true;
                q.push(b);
            }
        }




<A NAME="1"></A>        while (!q.empty())
        {
            //we open the box now
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match29-1.html#1',3,'match29-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            auto now = q.front();
            //printf(&quot;now:%d\n&quot;, now);
            //ans += candies[now];

            q.pop();
            
            //printf(&quot;key &quot;);
            for (auto k : keys[now])
            {
                //printf(&quot;%d &quot;, k);
                ky[k] = true;
            }
            //puts(&quot;&quot;);
            
            /*
            printf(&quot;own &quot;);
            for (int i = 0; i &lt; n; i++)
            {
                if (own[i] == true)
                    printf(&quot;%d &quot;, i);
            }
            puts(&quot;&quot;);
            */

            for (auto b : containedBoxes[now])
            {
                own[b] = true;
                //printf(&quot;contain:%d\n&quot;, b);
                //q.push()
            }

            for (int i = 0; i &lt; n; i++)
            {
                if (visit[i] == true || own[i] == false)</B></FONT>
                    continue;
                if (status[i] == 1 || (status[i] == 0 &amp;&amp; ky[i] == true))
                {
                    //printf(&quot;i:%d status[i]:%d ky:%d\n&quot;, i, status[i], ky[i]);
                    visit[i] = true;
                    q.push(i);
                    ans += candies[i];
                }
            }
            //puts(&quot;&quot;);

        }

        return ans;
        
    }
};

</PRE>
</BODY>
</HTML>
